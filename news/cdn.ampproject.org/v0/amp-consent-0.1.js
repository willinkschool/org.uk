(self.AMP=self.AMP||[]).push({m:0,v:"2111060251009",n:"amp-consent",ev:"0.1",l:true,f:function(AMP,_){"use strict";var l;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ca="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function da(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}da(this);"function"===typeof Symbol&&Symbol("x");var ea;if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={a:!0},ia={};try{ia.__proto__=ha;fa=ia.a;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka,ja=ea;function m(){return ka?ka:ka=Promise.resolve(void 0)}function p(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}function la(a){return new Promise((function(b){b(a())}))}var r=Array.isArray;function ma(a,b){if(!isFinite(5))throw Error("Invalid depth: 5");if(a===b)return!0;for(var c=[{a:a,b:b,depth:5}];0<c.length;){var d=c.shift();a=d.a;b=d.b;d=d.depth;if(0<d){if(typeof a!==typeof b)return!1;if(r(a)&&r(b)){if(a.length!==b.length)return!1;for(var e=0;e<a.length;e++)c.push({a:a[e],b:b[e],depth:d-1});continue}else if(a&&b&&"object"===typeof a&&"object"===typeof b){var f=Object.keys(a),h=Object.keys(b);if(f.length!==h.length)return!1;e=ba(f);for(var g=e.next();!g.done;g=e.next()){var k=g.value;c.push({a:a[k],b:b[k],depth:d-1})}continue}}if(a!==b)return!1}return!0}function na(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}var oa=Object.prototype,t=oa.hasOwnProperty,pa=oa.toString;function u(a){return"[object Object]"===pa.call(a)}function v(a){var b=Object.create(null);a&&Object.assign(b,a);return b}function w(a){return a||{}}function qa(a,b){var c=[],d=[];for(d.push({t:a,s:b,d:0});0<d.length;){var e=d.shift(),f=e.d;b=e.s;var h=e.t;if(c.includes(b))throw Error("Source object has a circular reference.");c.push(b);if(h!==b)if(1<f)Object.assign(h,b);else{e=ba(Object.keys(b));for(var g=e.next();!g.done;g=e.next()){g=g.value;var k=b[g];if(t.call(h,g)){var n=h[g];if(u(k)&&u(n)){d.push({t:n,s:k,d:f+1});continue}}h[g]=k}}}return a}function ra(a){return"number"===typeof a&&isFinite(a)}function sa(a){var b=!1,c=null,d=a;return function(e){for(var f=[],h=0;h<arguments.length;++h)f[h-0]=arguments[h];b||(c=d.apply(self,f),b=!0,d=null);return c}}var ta=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function x(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}function ua(a){var b=v();if(!a)return b;for(var c;c=ta.exec(a);){var d=x(c[1],c[1]);c=c[2]?x(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}function va(a){a=(a||self).location;return ua(a.originalHash||a.hash)}var y=self.AMP_CONFIG||{},wa=("string"==typeof y.cdnProxyRegex?new RegExp(y.cdnProxyRegex):y.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function xa(a){if(!self.document||!self.document.head||self.location&&wa.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}var ya={thirdParty:y.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:y.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof y.thirdPartyFrameRegex?new RegExp(y.thirdPartyFrameRegex):y.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:y.cdnUrl||xa("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:wa,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:y.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:y.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:y.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:y.geoApiUrl||xa("amp-geo-api")};var Aa="";self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function Ba(){throw Error("failed to call initLogConstructor")}function A(a){z.user||(z.user=Ba());var b=z.user.win;return a&&a.ownerDocument.defaultView!=b?z.userForEmbed||(z.userForEmbed=Ba()):z.user}function B(){return z.dev||(z.dev=Ba())}function C(a,b,c,d,e){return A().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}function D(a){return a?t.call(a,"isDirty")&&1==a.isDirty?!0:!1:!1}function Ca(a){return 1==a?!0:2==a?!1:null}function Da(a,b,c){if(!a&&!b)return!0;if(a&&b){var d=Ca(a.consentState)===Ca(b.consentState),e=(a.consentString||"")===(b.consentString||"");var f=c?!!a.isDirty===!!c:!!a.isDirty===!!b.isDirty;var h=ma(a.consentMetadata,b.consentMetadata),g=ma(a.purposeConsents,b.purposeConsents);return d&&e&&h&&g&&f}return!1}function E(a,b,c,d,e){return{consentState:a,consentString:b,consentMetadata:c,purposeConsents:d,isDirty:e}}function Ea(a,b,c,d){return{consentStringType:a,additionalConsent:b,gdprApplies:c,purposeOne:d}}function Fa(a){return!0===a||1===a?1:!1===a||0===a?2:5}function Ga(a){return a.consentString?!0:1===a.consentState||2===a.consentState}function F(a){return 1===a?"accepted":2===a?"rejected":"unknown"}var Ha={appconsent:{consentInstanceId:"appconsent",checkConsentHref:"https://collector.appconsent.io/amp/check-consent",promptUISrc:"https://cdn.appconsent.io/loader.html"},ConsentManager:{consentInstanceId:"ConsentManager",checkConsentHref:"https://consentmanager.mgr.consensu.org/delivery/ampcheck.php",promptUISrc:"https://consentmanager.mgr.consensu.org/delivery/ampui.php"},didomi:{consentInstanceId:"didomi",checkConsentHref:"https://api.privacy-center.org/amp/check-consent",promptUISrc:"https://sdk-amp.privacy-center.org/loader.html"},iubenda:{consentInstanceId:"iubenda",checkConsentHref:"https://amp.iubenda.com/checkConsent",promptUISrc:"https://www.iubenda.com/en/help/22135-cookie-solution-amp"},sirdata:{consentInstanceId:"sirdata",checkConsentHref:"https://sddan.mgr.consensu.org/api/v1/public/amp/check",promptUISrc:"https://ui.sddan.mgr.consensu.org/amp.html"},Marfeel:{consentInstanceId:"Marfeel",checkConsentHref:"https://live.mrf.io/cmp/marfeel/amp/check-consent",promptUISrc:"https://live.mrf.io/cmp/marfeel/amp/index.html"},Ogury:{consentInstanceId:"Ogury",checkConsentHref:"https://api.ogury.mgr.consensu.org/v1/check-for-consent",promptUISrc:"https://www.ogury.mgr.consensu.org/amp.html"},onetrust:{consentInstanceId:"onetrust",checkConsentHref:"https://cdn.cookielaw.org/amp/consent/check",promptUISrc:" https://amp.onetrust.mgr.consensu.org/"},opencmp:{consentInstanceId:"opencmp",checkConsentHref:"https://amp.opencmp.net/consent/check",promptUISrc:"https://cdn.opencmp.net/tcf-v2/amp/cmp.html"},pubtech:{consentInstanceId:"pubtech",checkConsentHref:"https://amp.pubtech.it/cmp-amp-check-consent",promptUISrc:"https://cdn.pubtech.ai/amp/index.html"},quantcast:{consentInstanceId:"quantcast",checkConsentHref:"https://apis.quantcast.mgr.consensu.org/amp/check-consent",promptUISrc:"https://quantcast.mgr.consensu.org/tcfv2/amp.html"},SourcePoint:{consentInstanceId:"SourcePoint",checkConsentHref:"https://sourcepoint.mgr.consensu.org/consent/v2/amp",promptUISrc:"https://amp.pm.sourcepoint.mgr.consensu.org/"},UniConsent:{consentInstanceId:"UniConsent",checkConsentHref:"https://edge.uniconsent.com/amp/check-consent",promptUISrc:"https://cmp.uniconsent.com/amp/index.html"},Usercentrics:{consentInstanceId:"Usercentrics",checkConsentHref:"https://consents.usercentrics.eu/amp/checkConsent",promptUISrc:"https://amp.usercentrics.eu/amp.html"},LiveRamp:{consentInstanceId:"LiveRamp",checkConsentHref:"https://api.privacymanager.io/amp/check-consent",promptUISrc:"https://amp-consent-tool.privacymanager.io/1/index.html"},googlefc:{consentInstanceId:"googlefc",checkConsentHref:"https://fundingchoicesmessages.google.com/amp/consent/check?pvid=PAGE_VIEW_ID_64&anonid=CONSENT_PAGE_VIEW_ID_64&href=SOURCE_URL",promptUISrc:"https://fundingchoicesmessages.google.com/amp/consent/message?pvid=PAGE_VIEW_ID_64&anonid=CONSENT_PAGE_VIEW_ID_64&href=SOURCE_URL&clientConfig=CONSENT_INFO(clientConfig)",xssiPrefix:")]}'",uiConfig:{overlay:!0}}};
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */var G;function Ia(a){try{var b=a.ownerDocument,c=b.createElement("div"),d=b.createElement("div");c.appendChild(d);return c.querySelector(":scope div")===d}catch(e){return!1}}function Ja(a,b){a.classList.add("i-amphtml-scoped");var c=b.replace(/^|,/g,"$&.i-amphtml-scoped "),d=a.querySelectorAll(c);a.classList.remove("i-amphtml-scoped");return d}function Ka(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function La(a){return a.closest?a.closest(".i-amphtml-fie"):Ka(a,(function(b){var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector;return c?c.call(b,".i-amphtml-fie"):!1}))}function Ma(a,b){var c=[];for(a=a.firstElementChild;a;a=a.nextElementSibling)b(a)&&c.push(a);return c}function Na(a){/^[\w-]+$/.test("placeholder");return a.querySelector("placeholder")}function Oa(a){return Ma(a,(function(b){if("string"==typeof b)var c=b;else b.nodeType===Node.ELEMENT_NODE&&(c=b.tagName);b=c&&c.toLowerCase().startsWith("i-")?!0:b.nodeType!==Node.ELEMENT_NODE?!1:b.hasAttribute("placeholder")||b.hasAttribute("fallback")||b.hasAttribute("overflow");return!b}))}function Pa(a){var b;null==(b=a.parentElement)||b.removeChild(a)}function Qa(a,b){a.insertBefore(b,a.firstChild)}function Ra(a){try{a.focus()}catch(b){}}function H(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return I(a,b)}function J(a,b){var c=K(a);c=L(c);return I(c,b)}function Sa(a,b){a=K(a);a=L(a);return Ta(a,b)?I(a,b):null}function M(a,b){a=L(a);var c=Ua(a,b);c?b=c:(a=Va(a),a[b]=Wa(),b=a[b].promise);return b}function K(a){return a.nodeType?H((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function L(a){a=K(a);return a.isSingleDoc()?a.win:a}function I(a,b){Ta(a,b);a=Va(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Ua(a,b){var c=Va(a)[b];if(c){if(c.promise)return c.promise;I(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Va(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Ta(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function Wa(){var a=new p,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}function Xa(a){var b=Ua(L(a),"geo");if(b)return b;var c=K(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-geo");return d?H(c.win,"extensions").waitForExtension("amp-geo",d):null})).then((function(d){return d?Ua(L(a),"geo"):null}))}function N(){this.kb=100;this.Aa=this.Qa=0;this.ka=v()}N.prototype.has=function(a){return!!this.ka[a]};N.prototype.get=function(a){var b=this.ka[a];if(b)return b.access=++this.Aa,b.payload};N.prototype.put=function(a,b){this.has(a)||this.Qa++;this.ka[a]={payload:b,access:this.Aa};if(!(this.Qa<=this.kb)){a=this.ka;var d,c=this.Aa+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Qa--)}};var Za,$a,Ya=new Set(["c","v","a","ad"]);function O(a){return"string"==typeof a?P(a):a}function P(a){Za||(Za=self.document.createElement("a"),$a=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new N));var b=Za,c=$a;if(c&&c.has(a))a=c.get(a);else{b.href=a;b.protocol||(b.href=b.href);var d={href:b.href,protocol:b.protocol,host:b.host,hostname:b.hostname,port:"0"==b.port?"":b.port,pathname:b.pathname,search:b.search,hash:b.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=b.origin&&"null"!=b.origin?b.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(a,d);a=d}return a}function ab(a,b){var c=void 0===c?"source":c;C(null!=a,"%s %s must be available",b,c);var d=O(a);d="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname||na(d.hostname,".localhost");C(d||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a)}function Q(a){return ya.cdnProxyRegex.test(O(a).origin)}function bb(a){a=O(a);if(!Q(a))return a.href;var b=a.pathname.split("/");C(Ya.has(b[1]),"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);C(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(/[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\b[^&]*/g,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function cb(a,b){b=O(b);if("function"==typeof URL)var c=new URL(a,b.href).toString();else{c=a;var d=O(b);c=c.replace(/\\/g,"/");var e=P(c);c=c.toLowerCase().startsWith(e.protocol)?e.href:c.startsWith("//")?d.protocol+c:c.startsWith("/")?d.origin+c:d.origin+d.pathname.replace(/\/[^/]*$/,"/")+c}return c}function db(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b}function eb(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")}var fb={"-":"+",_:"/",".":"="},gb={"+":"-","/":"_","=":"."};function hb(a){var b=atob(a.replace(/[-_.]/g,(function(c){return fb[c]})));return db(b)}function ib(a){a=eb(a);return btoa(a).replace(/[+/=]/g,(function(b){return gb[b]}))}function jb(a,b){try{var c=a.document.cookie}catch(g){c=""}var d=c;if(!d)return null;var e=d.split(";");for(a=0;a<e.length;a++){var f=e[a].trim(),h=f.indexOf("=");if(-1!=h&&x(f.substring(0,h).trim())==b)return b=f.substring(h+1).trim(),x(b,b)}return null}function kb(a,b,c,d,e,f,h){"ampproject.org"==e&&(c="delete",d=0);b=encodeURIComponent(b)+"="+encodeURIComponent(c)+"; path=/"+(e?"; domain="+e:"")+"; expires="+new Date(d).toUTCString()+(f?"; SameSite="+f:"")+(h?"; Secure":"");try{a.document.cookie=b}catch(g){}}function lb(a){var b;if((b=(b=a.crypto)||a.msCrypto)&&b.getRandomValues){var c=new Uint8Array(16);b.getRandomValues(c);b=c}else b=null;return b?b:String(a.location.href+Date.now()+a.Math.random()+a.screen.width+a.screen.height)}function mb(a){var b=lb(a);return"string"==typeof b?H(a,"crypto").sha384Base64(b):la((function(){return ib(b).replace(/\.+$/,"")}))}function nb(a){var b=this;this.A=a;this.ma=this.Ea=this.Da=this.H=this.ab=null;this.F=void 0;var c=new p;this.pb=c.resolve;this.ob=c.promise;this.consentPageViewId64=sa((function(){return mb(b.A.win)}))}l=nb.prototype;l.registerConsentInstance=function(a,b){this.H?B().error("CONSENT-STATE-MANAGER","Cannot register consent instance %s, instance %s has already been registered.",a,this.ab):(this.ab=a,this.H=new R(this.A,a,b),this.ma&&(this.ma(),this.ma=null))};l.updateConsentInstanceState=function(a,b,c){this.H?(this.H.update(a,b,this.F,c,!1),this.Da&&(this.Da(E(a,b,c,this.F)),this.hasAllPurposeConsents())):B().error("CONSENT-STATE-MANAGER","instance not registered")};l.updateConsentInstancePurposes=function(a,b){var c=this,d=b=void 0===b?!1:b;this.F||(this.F={});Object.keys(a).forEach((function(e){d&&t.call(c.F,e)||(c.F[e]=a[e]?1:2)}))};l.getLastConsentInstanceInfo=function(){return this.H.get()};l.getConsentInstanceInfo=function(){return this.H.get().then((function(a){return D(a)?E(5):a}))};l.onConsentStateChange=function(a){this.Da=a;this.getConsentInstanceInfo().then((function(b){a(b)}))};l.setConsentInstanceSharedData=function(a){this.H.sharedDataPromise=a};l.hasAllPurposeConsents=function(){this.pb()};l.whenHasAllPurposeConsents=function(){return this.ob};l.setDirtyBit=function(){this.H.setDirtyBit()};l.getConsentInstanceSharedData=function(){return this.H.sharedDataPromise};l.whenConsentReady=function(){if(this.H)return m();if(!this.Ea){var a=new p;this.Ea=a.promise;this.ma=a.resolve}return this.Ea};l.Ab=function(){return this.H.ia};function R(a,b,c){this.A=a;this.qb=b;this.sharedDataPromise=null;a=K(a);var d=H(a.win,"ampdoc");d=d.isSingleDoc()?d.getSingleDoc():null;this.gb=M(d&&d.win==a.win?d:a,"storage");this.ia=this.B=null;this.xa="amp-consent:"+b;(this.qa=c.onUpdateHref||null)&&ab(this.qa,"AMP-CONSENT");this.Ha=void 0}R.prototype.setDirtyBit=function(){var a=this;this.Ha=!0;return this.get().then((function(b){D(b)||a.update(b.consentState,b.consentString,b.purposeConsents,b.consentMetadata,!0)}))};R.prototype.update=function(a,b,c,d,e){var f=a;var h=this.B&&this.B.consentState;1===f||2===f||3===f||4===f||5===f||(f=5);f=3==f?h||5:4==f&&h&&5!=h?h:f;if(3===a){var g,k,n;this.B=E(f,null==(g=this.B)?void 0:g.consentString,null==(k=this.B)?void 0:k.consentMetadata,null==(n=this.B)?void 0:n.purposeConsents)}else{a=this.B;e&&D(a)?this.B=E(f,b,d,c,!0):this.B=E(f,b,d,c);var q=E(f,b,d,c,this.Ha);Da(q,this.ia)||ob(this,q)}};function ob(a,b){a.gb.then((function(c){if(Da(b,a.B,a.Ha))if(5===b.consentState)c.remove(a.xa);else{a:{var d=v();var e=b.consentState;if(1==e)d.s=1;else if(2==e)d.s=0;else{d=null;break a}b.consentString&&(d.r=b.consentString);!0===b.isDirty&&(d.d=1);if(b.consentMetadata){e=b.consentMetadata;var f=v();e.consentStringType&&(f.cst=e.consentStringType);e.additionalConsent&&(f.ac=e.additionalConsent);void 0!=e.gdprApplies&&(f.ga=e.gdprApplies);void 0!=e.purposeOne&&(f.po=e.purposeOne);d.m=f}b.purposeConsents&&(d.pc=b.purposeConsents);d=0==Object.keys(d)?null:d}null!=d&&(a.ia=b,c.setNonBoolean(a.xa,d),pb(a,b))}}))}R.prototype.get=function(){var a=this;if(this.B)return Promise.resolve(this.B);var b;return this.gb.then((function(c){b=c;return b.get(a.xa)})).then((function(c){if(a.B)return a.B;if(void 0===c)var d=E(5);else if("boolean"===typeof c)d=Fa(c),d=E(d);else{if(!u(c))throw B().createError("Invalid stored consent value");d=Fa(c.s);var e=c.r;var f=(f=c.m)?Ea(f.cst,f.ac,f.ga,f.po):Ea();d=E(d,e,f,c.pc,c.d&&1===c.d)}a.ia=d;D(d)&&(pb(a,E(5)),b.remove(a.xa),a.ia=null);a.B=d;return a.B})).catch((function(c){B().error("CONSENT-STATE-MANAGER","Failed to read storage",c);return E(5)}))};function pb(a,b){if(a.qa&&!D(b)){var c=Ca(b.consentState);qb(a.A).then((function(d){var e={consentInstanceId:a.qb,ampUserId:d};null!=c&&(e.consentState=c);e.consentStateValue=F(b.consentState);b.consentString&&(e.consentString=b.consentString);b.consentMetadata&&(e.consentMetadata=b.consentMetadata);b.purposeConsents&&(e.purposeConsents=b.purposeConsents);var f={credentials:"include",method:"POST",body:e,ampCors:!1};a.A.whenFirstVisible().then((function(){rb(a.A.getHeadNode(),a.qa).then((function(h){H(a.A.win,"xhr").fetchJson(h,f)}))}))}))}}var sb={promptUI:!0,checkConsentHref:!0,promptIfUnknownForGeoGroup:!0,onUpdateHref:!0},tb={PAGE_VIEW_ID:!0,PAGE_VIEW_ID_64:!0,SOURCE_URL:!0};function ub(a){this.N=a;this.Ca=this.da=null}ub.prototype.getConsentConfigPromise=function(){this.Ca||(this.Ca=vb(this));return this.Ca};ub.prototype.getMatchedGeoGroup=function(){return this.da};function wb(a){if(!a.consents)return a;var b=Object.keys(a.consents);C(1>=b.length,"%s: only single consent instance is supported","amp-consent/consent-config");if(0<b.length){a.consentInstanceId=b[0];var c=a.consents[b[0]],d=Object.keys(c);for(b=0;b<d.length;b++){var e=d[b];!a[e]&&sb[e]&&(a[d[b]]=c[d[b]])}}delete a.consents;return a}function vb(a){var b=wb(C(xb(a),"%s: Inline config not found")),c=yb(a),d=qa(c||{},b||{});C(d.consentInstanceId,"%s: consentInstanceId to store consent info is required","amp-consent/consent-config");if(d.policy)for(var e=Object.keys(d.policy),f=0;f<e.length;f++)"default"!=e[f]&&(A().warn("amp-consent/consent-config","policy %s is currently not supported and will be ignored",e[f]),delete d.policy[e[f]]);var h=d.promptIfUnknownForGeoGroup;"string"===typeof h?(d.consentRequired=!1,e={},d.geoOverride=(e[h]={consentRequired:!0},e)):void 0===d.consentRequired&&d.checkConsentHref&&(d.consentRequired="remote");return zb(a,d).then((function(g){var k=g.consentRequired;C("boolean"===typeof k||"remote"===k,"`consentRequired` is required","amp-consent/consent-config");"remote"===k&&C(g.checkConsentHref,"%s: `checkConsentHref` must be specified if `consentRequired` is remote","amp-consent/consent-config");return g})).then((function(g){var k=a.N;/^[\w-]+$/.test("amp-story-consent");(void 0!==G?G:G=Ia(k))?k=k.querySelector("> amp-story-consent".replace(/^|,/g,"$&:scope ")):(k=Ja(k,"> amp-story-consent"),k=void 0===k[0]?null:k[0]);k&&C(!g.promptUISrc,"%s: `promptUiSrc` cannot be specified while using %s.","amp-consent/consent-config","amp-story-consent");return g}))}function zb(a,b){return b.geoOverride?Xa(a.N).then((function(c){C(c,"%s: requires <amp-geo> to use `geoOverride`","amp-consent/consent-config");for(var d=v(b),e=Object.keys(b.geoOverride),f=0;f<e.length;f++)if(2===c.isInCountryGroup(e[f])){var h=b.geoOverride[e[f]];t.call(h,"consentInstanceId")&&(A().error("amp-consent/consent-config","consentInstanceId cannot be overriden in geoGroup:",e[f]),delete h.consentInstanceId);qa(d,h);a.da=e[f];break}delete d.geoOverride;return d})):Promise.resolve(b)}function xb(a){try{var b=a.N;/^[\w-]+$/.test("script");var c=(void 0!==G?G:G=Ia(b))?b.querySelectorAll("> script".replace(/^|,/g,"$&:scope ")):Ja(b,"> script");var d=c.length;if(1!==d)throw Error("Found "+d+" <script> children. Expected 1.");var f,e=c[0];if("SCRIPT"!=e.tagName||"APPLICATION/JSON"!=(null==(f=e.getAttribute("type"))?void 0:f.toUpperCase()))throw Error('<script> child must have type="application/json"');try{var h=JSON.parse(e.textContent)}catch(g){throw Error("Failed to parse <script> contents. Is it valid JSON?")}return h}catch(g){throw A(a.N).createError("amp-consent/consent-config",g)}}function yb(a){a=a.N.getAttribute("type");if(!a)return null;C(Ha[a],"%s: invalid CMP type %s","amp-consent/consent-config",a);var b=Ha[a];a=["consentInstanceId","checkConsentHref","promptUISrc"];for(var c=0;c<a.length;c++);return b}function rb(a,b,c){var d=Object.assign({},{CLIENT_ID:qb(a),CONSENT_PAGE_VIEW_ID_64:function(){return M(a,"consentStateManager").then((function(e){return e.consentPageViewId64()}))}},c);return Sa(a,"url-replace").expandUrlAsync(b,d,Object.assign({},d,tb))}function qb(a){return M(a,"cid").then((function(b){return b.get({scope:"AMP-CONSENT",createCookieIfNotPresent:!0},m())}))}function Ab(a,b){var c={};c[b]=void 0;var d={waitFor:c},e=[4,1,2,3],f={waitFor:c,timeout:{seconds:0,fallbackAction:"reject"},unblockOn:e};a._till_responded={waitFor:c,unblockOn:e};a._till_accepted=d;a._auto_reject=f;if(a&&a["default"])return a;a["default"]=d;return a}function Bb(){this.I=null}l=Bb.prototype;l.add=function(a){var b=this;this.I||(this.I=[]);this.I.push(a);return function(){b.remove(a)}};l.remove=function(a){if(this.I){var b=this.I;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};l.removeAll=function(){this.I&&(this.I.length=0)};l.fire=function(a){if(this.I)for(var b=ba(this.I),c=b.next();!c.done;c=b.next())c=c.value,c(a)};l.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.I)?void 0:a.length)?b:0};var Cb={"default":!0,_till_responded:!0,_till_accepted:!0,_auto_reject:!0};function Db(a){this.A=a;this.V=v();this.R=v();this.za=M(this.A,"consentStateManager");this.Xa=new p;var b=new p;this.mb=b.promise;this.Ga=b.resolve;this.Ya=new Bb;this.ya=this.F=this.la=this.na=this.K=this.Wa=null}l=Db.prototype;l.setLegacyConsentInstanceId=function(a){this.Wa=a;this.P()};l.registerConsentPolicyInstance=function(a,b){var c=this;if(!this.R[a]){var d=Object.keys(b.waitFor||{});if(1!==d.length||d[0]!==this.Wa)A().error("consent-policy-manager","invalid waitFor value, consent policy will never resolve");else{var e=new Eb(b);this.R[a]=e;this.V[a]&&(this.V[a].resolve(),this.V[a]=null);this.mb.then((function(){c.K&&e.evaluate(c.K);c.Ya.add((function(f){e.evaluate(f)}));c.Xa.promise.then((function(){e.startTimeout(c.A.win)}))}))}}};l.P=function(){var a=this;this.za.then((function(b){b.whenConsentReady().then((function(){b.onConsentStateChange((function(c){var d=c.consentState,e=c.consentMetadata,f=c.purposeConsents,h=a.la,g=a.na,k=a.F;a.na=c.consentString;a.la=e;a.F=f;5!==d&&(4==d?1!=a.K&&2!=a.K&&(a.K=4):3==d?(null===a.K&&(a.K=5),a.na=g,a.la=h,a.F=k):a.K=d,a.Ya.fire(a.K),a.ya&&a.ya());a.Ga&&(a.Ga(),a.Ga=null)}))}))}))};l.enableTimeout=function(){this.Xa.resolve()};l.setOnPolicyChange=function(a){this.ya||(this.ya=a)};l.whenPolicyResolved=function(a){var b=this;return Cb[a]?Fb(this,a).then((function(){return b.R[a].getReadyPromise().then((function(){return b.R[a].getCurrentPolicyStatus()}))})):(A().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",a),Promise.resolve(4))};l.whenPolicyUnblock=function(a){var b=this;return Cb[a]?Fb(this,a).then((function(){return b.R[a].getReadyPromise().then((function(){return b.R[a].shouldUnblock()}))})):(A().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",a),Promise.resolve(!1))};l.getMergedSharedData=function(a){var b=this;return this.whenPolicyResolved(a).then((function(){return b.za})).then((function(c){return c.getConsentInstanceSharedData()}))};l.getConsentStringInfo=function(a){var b=this;return this.whenPolicyResolved(a).then((function(){return b.na}))};l.getConsentMetadataInfo=function(a){var b=this;return this.whenPolicyResolved(a).then((function(){return b.la}))};l.whenPurposesUnblock=function(a){var b=this;return this.za.then((function(c){return c.whenHasAllPurposeConsents()})).then((function(){return b.F?a.every((function(c){return t.call(b.F,c)&&1===b.F[c]})):!1}))};function Fb(a,b){if(a.R[b])return m();a.V[b]||(a.V[b]=new p);return a.V[b].promise}function Eb(a){this.O=a;var b=new p;this.sb=b.promise;this.ua=b.resolve;this.Ra=4;this.ub=a.unblockOn||[1,3]}l=Eb.prototype;l.startTimeout=function(a){var e,b=this,c=this.O.timeout,d=null;void 0!=c&&(u(c)?(c.fallbackAction&&"reject"==c.fallbackAction?e=2:c.fallbackAction&&"dismiss"!=c.fallbackAction&&A().error("consent-policy-manager","unsupported fallbackAction %s",c.fallbackAction),d=c.seconds):d=c,C(ra(d),"invalid timeout value %s",d));null!=d&&a.setTimeout((function(){e=e||5;b.evaluate(e,!0)}),1e3*d)};l.evaluate=function(a,b){b=void 0===b?!1:b;!a||b&&!this.ua||(this.Ra=1===a?1:2===a?2:4===a?3:4,this.ua&&(this.ua(),this.ua=null))};l.getReadyPromise=function(){return this.sb};l.getCurrentPolicyStatus=function(){return this.Ra};l.shouldUnblock=function(){return-1<this.ub.indexOf(this.Ra)};var S;function Gb(a){a=a.tagName;return a.startsWith("AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==a||"AMP-BODY"==a)}function Hb(a){Gb(a);if(a.createdCallback)return Promise.resolve(a);if(!a.__AMP_UPG_PRM){var b=new p;a.__AMP_UPG_PRM=b.promise;a.__AMP_UPG_RES=b.resolve}return a.__AMP_UPG_PRM}var T,Ib="Webkit webkit Moz moz ms O o".split(" ");function Jb(a,b,c){if(b.startsWith("--"))return b;T||(T=v());var d=T[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<Ib.length;f++){var h=Ib[f]+e;if(void 0!==a[h]){e=h;break a}}e=""}var g=e;void 0!==a[g]&&(d=g)}c||(T[b]=d)}return d}function Kb(a,b,c){(b=Jb(a.style,b,void 0))&&(b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c)}function U(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}var Lb=['<svg viewBox="0 0 40 40"><defs><linearGradient id=grad><stop stop-color="rgb(105, 105, 105)"></stop><stop offset=100% stop-color="rgb(105, 105, 105)" stop-opacity=0></stop></linearGradient></defs><path d="M11,4.4 A18,18, 0,1,0, 38,20" stroke=url(#grad)></path></svg>'];function Mb(a,b,c){this.C=a;this.pa=this.La=this.Ma=this.aa=this.Ka=!1;this.h=null;this.ra=b.uiConfig&&!0===b.uiConfig.overlay;this.lb=b.captions&&b.captions.consentPromptCaption||"User Consent Prompt";this.jb=b.captions&&b.captions.buttonActionCaption||"Focus Prompt";this.fb=!1;this.X=!0;this.$=this.wa=this.ca=null;this.A=a.getAmpDoc();this.ja=J(this.A,"viewport");this.ib=J(this.A,"viewer");this.j=a.element;this.G=a.win;this.T=this.G.document;this.Ia=null;this.Pa=!1;this.fa=this.Va=null;this.U="30vh";this.Ba=!0;this.Ja=this.J=!1;this.Ua=this.nb.bind(this);this.O=b;this.P(b,c)}l=Mb.prototype;l.P=function(a,b){if(b){var c=this.A.getElementById(b);c||A().error("amp-consent-ui","postPromptUI element with id=%s not found",b);this.h=c;this.aa=!0}else{var d=a.promptUI,e=a.promptUISrc;if(d){var f=this.A.getElementById(d);f&&this.j.contains(f)||A().error("amp-consent-ui","child element of <amp-consent> with promptUI id %s not found",d);f.querySelector("amp-iframe")&&A().error("amp-consent-ui","`promptUI` element contains an <amp-iframe>. This may cause content flashing when consent is not required. Consider using `promptUISrc` instead. See https://go.amp.dev/c/amp-analytics");this.h=f}else if(e){this.Ka=!0;ab(e,this.j);b=this.j.ownerDocument.createElement("iframe");var h=["allow-scripts","allow-popups"],g=Sa(this.j,"url"),k=g.parse(e);g=g.parse(this.A.getUrl());k.origin!=g.origin&&h.push("allow-same-origin");b.setAttribute("sandbox",h.join(" "));b.classList.add("i-amphtml-consent-ui-fill");this.h=b;b=this.j.ownerDocument.createElement("placeholder");U(b,!1);b.classList.add("i-amphtml-consent-ui-placeholder");h=b.ownerDocument||b;S&&S.ownerDocument===h||(S=h.createElement("div"));h=S;h.innerHTML=Lb[0];k=h.firstElementChild;h.removeChild(k);b.appendChild(k);this.fa=b;this.Va=a.clientConfig||null}}};l.show=function(a){var b=this;if(this.h)if(this.aa&&!this.j.contains(this.h))U(this.h,!0);else{U(this.j,!0);var c=this.j.classList;c.add("amp-active");c.remove("amp-hidden");this.C.getViewport().addToFixedLayer(this.j,!0);if(this.Ka)this.Ja=a,Nb(this).then((function(){b.C.mutateElement((function(){b.aa||(b.$=b.T.activeElement);Ob(b);Pb(b);Qb(b)}))}));else{var d=function(){b.h&&(U(b.h,!0),b.aa||(b.$=b.T.activeElement,Ob(b),b.resume(),b.h.focus()))};Gb(this.h)?Hb(this.h).then((function(){return b.h.build()})).then((function(){return d()})):d()}this.Ma=!0}};l.hide=function(){var a=this;this.h&&(this.pause(),this.C.mutateElement((function(){a.Ka&&Rb(a);if(!a.aa){var b=a.j.classList;b.remove("amp-active");b.add("amp-hidden")}a.ra&&(a.ca&&U(a.ca,!1),Sb(a));a.wa&&(Pa(a.wa),delete a.wa);Sb(a);Tb(a);a.C.getViewport().removeFromFixedLayer(a.j);U(a.h,!1);a.Ma=!1;a.$?(a.$.focus(),a.$=null):0<a.G.document.body.children.length&&a.G.document.body.children[0].focus()})))};l.pause=function(){this.h&&J(this.C.element,"owners").schedulePause(this.C.element,this.h)};l.resume=function(){this.h&&(J(this.C.element,"owners").scheduleLayout(this.C.element,this.h),J(this.C.element,"owners").scheduleResume(this.C.element,this.h))};function Ub(a,b){a.U="30vh";a.Ba=!0;a.J=!1;if(b.initialHeight)if("string"===typeof b.initialHeight&&0<=b.initialHeight.indexOf("vh")){var c=parseInt(b.initialHeight,10);a.U=80<=c?"80vh":a.U;10<=c&&80>=c?(a.U=c+"vh",a.J=60<c,a.ra=a.J||a.ra):A().error("amp-consent-ui","Inavlid initial height: "+b.initialHeight+".Minimum: 10vh. Maximum: 80vh.")}else A().error("amp-consent-ui","Inavlid initial height: "+b.initialHeight+'.Must be a string in "vh" units.');!1!==b.border||a.J||(a.Ba=!1);a.Ia.resolve()}function Vb(a){return M(a.A,"consentStateManager").then((function(b){return b.getLastConsentInstanceInfo().then((function(c){return w({clientConfig:a.Va,consentState:F(c.consentState),consentStateValue:F(c.consentState),consentMetadata:c.consentMetadata,consentString:c.consentString,promptTrigger:a.Ja?"action":"load",isDirty:!!c.isDirty,purposeConsents:c.purposeConsents})}))}))}function Nb(a){a.Ia=new p;var b=a.j.classList;Na(a.j)||Qa(a.j,a.fa);b.add("i-amphtml-consent-ui-loading");U(a.h,!1);a.Pa=!1;var c=Vb(a).then((function(d){return rb(a.j,a.O.promptUISrc,{CONSENT_INFO:function(e){return JSON.stringify(d[e])}}).then((function(e){a.h.src=e;a.h.setAttribute("name",JSON.stringify(d));a.G.addEventListener("message",a.Ua);Qa(a.j,a.h)}))}));return Promise.all([c,a.Ia.promise,a.C.mutateElement((function(){U(a.fa,!0)}))])}function Qb(a){var b=a.j.classList;b.add("i-amphtml-consent-ui-iframe-active");U(a.fa,!1);U(a.h,!0);a.J&&(b.add("i-amphtml-consent-ui-modal"),Ra(a.h));Tb(a);a.C.mutateElement((function(){b.remove("i-amphtml-consent-ui-loading");a.C.mutateElement((function(){b.add("i-amphtml-consent-ui-in");a.La=!0;var c=a.j.classList;if(a.h){var f,d=a.h,e={height:a.U};for(f in e)Kb(d,f,e[f])}d={"--i-amphtml-modal-height":""+a.U};e=a.j.style;for(var h in d)e.setProperty(Jb(e,h),String(d[h]),"important");c.add("i-amphtml-consent-ui-iframe-transform");(a.Ba||a.J)&&c.add("i-amphtml-consent-ui-border-enabled");a.J&&a.ja.enterLightboxMode()}))}))}function Rb(a){var b=a.j.classList;b.remove("i-amphtml-consent-ui-iframe-active");b.remove("i-amphtml-consent-ui-modal");b.remove("i-amphtml-consent-ui-border-enabled");a.G.removeEventListener("message",a.Ua);b.remove("i-amphtml-consent-ui-iframe-fullscreen");a.pa?a.ib.sendMessage("cancelFullOverlay",{},!0):a.J&&a.ja.leaveLightboxMode();a.pa=!1;b.remove("i-amphtml-consent-ui-in");a.La=!1;a.h.removeAttribute("name");U(a.fa,!1);a.Pa=!0;a.G.setTimeout((function(){a.Pa&&Pa(a.h)}),1e3)}function Pb(a){if(!a.fb&&!a.J){var b=a.T.createElement("div"),c=a.T.createElement("button"),d=a.T.createElement("div");b.setAttribute("role","alertdialog");d.textContent=a.lb;c.textContent=a.jb;c.onclick=function(){Ra(a.h)};b.appendChild(d);b.appendChild(c);b.classList.add("i-amphtml-consent-alertdialog");a.C.element.appendChild(b);Ra(c);a.fb=!0;a.wa=b}}function Tb(a){a=a.j;var c,b={transform:"",transition:""};for(c in b)Kb(a,c,b[c])}function Ob(a){if(a.ra){if(!a.ca){var b=a.G.document.createElement("div");b.classList.add("i-amphtml-consent-ui-mask");a.j.ownerDocument.body.appendChild(b);a.ca=b}U(a.ca,!0);a.X&&(a.ja.enterOverlayMode(),a.X=!1)}}function Sb(a){a.X||(a.ja.leaveOverlayMode(),a.X=!0)}l.nb=function(a){var b=this;if(this.h.contentWindow===a.source&&(a=a.data)&&"consent-ui"==a.type){var c=a.action,d=a.type;"ready"===c&&Ub(this,a);"enter-fullscreen"===c&&(!this.La||this.J||this.T.activeElement!==this.h&&!this.Ja?(A().warn("amp-consent-ui","Could not enter fullscreen. Fullscreen is only supported when the iframe is visible as a bottom sheet and after user interaction."),Wb(this,d,c,!0)):(Wb(this,d,c),this.C.mutateElement((function(){b.h&&b.Ma&&!b.pa&&(Tb(b),b.ib.sendMessage("requestFullOverlay",{},!0),b.j.classList.add("i-amphtml-consent-ui-iframe-fullscreen"),b.X&&(b.ja.enterOverlayMode(),b.X=!1),b.pa=!0)}))))}};function Wb(a,b,c,d){var e=d=void 0===d?!1:d;(a=a.h.contentWindow)&&a.postMessage({type:"amp-consent-response",requestType:b,requestAction:c,state:e?"error":"success",info:e?"Could not enter fullscreen. Fullscreen is only supported when the iframe is visible as a bottom sheet and after user interaction.":"Entering fullscreen."},"*")}var Xb=null;var Yb=/^[a-zA-Z0-9\-_.]+$/;function Zb(a){this.G=a;this.ba={}}Zb.prototype.get=function(a,b){if(!a||!b)return A().error("amp-consent/linker-reader","LINKER_PARAM requires two params, name and id"),null;if(!t.call(this.ba,a)){var c=this.ba,d=ua(this.G.location.search);if(t.call(d,a)){var e=d[a];d=e.split("*");var f=0==d.length%2;4>d.length||!f?(A().error("amp-analytics/linker","Invalid linker_param value "+e),d=null):(e=Number(d.shift()),1!==e?(A().error("amp-analytics/linker","Invalid version number "+e),d=null):(e=d.shift(),d=d.join("*"),d={checksum:e,serializedIds:d}));if(e=d){d=e.serializedIds;b:{e=e.checksum;for(f=0;1>=f;f++){var h=d,g=f;var k=(new Date).getTimezoneOffset();var n=window;var q=n.navigator.userLanguage||n.navigator.language;n=window.navigator.userAgent;k=[n,k,q].join("*");g=g||0;g=Math.floor(Date.now()/6e4)-g;h=[k,g,h].join("*");if(!Xb){g=Array(256);for(k=0;256>k;k++){n=k;for(q=0;8>q;q++)n=1&n?n>>>1^3988292384:n>>>1;g[k]=n}Xb=g}h="undefined"!==typeof TextEncoder?new TextEncoder("utf-8").encode(h):db(unescape(encodeURIComponent(h)));g=4294967295;for(k=0;k<h.length;k++)g=g>>>8^Xb[255&(g^h[k])];if(((-1^g)>>>0).toString(36)==e){e=!0;break b}}e=!1}if(e){e={};d=d.split("*");for(f=0;f<d.length;f+=2)h=d[f],Yb.test(h)?(g=hb(String(d[f+1])),"undefined"!==typeof TextDecoder?g=new TextDecoder("utf-8").decode(g):(g=eb(new Uint8Array(g.buffer||g)),g=decodeURIComponent(escape(g))),e[h]=g):A().error("amp-analytics/linker","Invalid linker key "+h+", value ignored");d=e}else A().error("amp-analytics/linker","LINKER_PARAM value checksum not valid"),d=null}else d=null}else d=null;c[a]=d}return this.ba[a]&&this.ba[a][b]?this.ba[a][b]:null};var $b={referrerDomains:!0,enabled:!0,cookiePath:!0,cookieMaxAge:!0,cookieSecure:!0,cookieDomain:!0},ac={LINKER_PARAM:!0};function bc(a,b,c){this.G=a;this.N=b;this.Ta=null;this.O=c;this.rb=new Zb(a)}bc.prototype.write=function(){this.Ta||(this.Ta=this.P());return this.Ta};bc.prototype.P=function(){var a=this.N;if(!(a=a.classList.contains("i-amphtml-fie")||!!La(a)||Q(this.G.location))){a=this.G||self;if(a.__AMP_MODE)var b=a.__AMP_MODE;else{var c=va(a)||va(a);c=["1","actions","amp","amp4ads","amp4email"].includes(c.development)||!!a.AMP_DEV_MODE;Aa||(Aa=(null==(b=a.AMP_CONFIG)?void 0:b.v)||"012111060251009");b=a.__AMP_MODE={localDev:!1,development:c,esm:!1,test:!1,rtvVersion:Aa}}a="inabox"==b.runtime}if(a||!t.call(this.O,"cookies"))return m();if(!u(this.O.cookies))return A().error("amp-consent/cookie-writer","cookies config must be an object"),m();var d=this.O.cookies;if(!1===d.enabled)return m();t.call(d,"cookieMaxAge")?(b=Number(d.cookieMaxAge))||0===b?(0>=b&&A().warn("amp-consent/cookie-writer","cookieMaxAge %s less than or equal to 0, cookie will immediately expire",d.cookieMaxAge),b*=1e3):(A().error("amp-consent/cookie-writer","invalid cookieMaxAge %s, falling back to default value (1 year)",d.cookieMaxAge),b=31536e6):b=31536e6;var e=b;b=Object.keys(d);var f=[];for(a=0;a<b.length;a++){c=b[a];var h=d[c];var g=h;$b[c]?g=!1:u(g)?t.call(g,"value")?g=!0:(A().error("amp-consent/cookie-writer","value is required in the cookieValue object"),g=!1):(A().error("amp-consent/cookie-writer","cookieValue must be configured in an object"),g=!1);g&&f.push(cc(this,c,h.value,e))}return Promise.all(f)};function cc(a,b,c,d){return Sa(a.N,"url-replace").expandStringAsync(c,{LINKER_PARAM:function(e,f){return a.rb.get(e,f)}},ac).then((function(e){if(e){var f=Date.now()+d,h=a.G,g={highestAvailableDomain:!0};g=void 0===g?{}:g;if(g.allowOnProxyOrigin)C(!g.highestAvailableDomain,"Could not support highestAvailable Domain on proxy origin, specify domain explicitly");else{C(!Q(h.location.href),"Should never attempt to set cookie on proxy origin: "+b);var k=P(h.location.href).hostname.toLowerCase(),n=P(ya.cdn).hostname.toLowerCase();C(!(k==n||na(k,"."+n)),"Should never attempt to set cookie on proxy origin. (in depth check): "+b)}k=void 0;if(g.domain)k=g.domain;else if(g.highestAvailableDomain)a:if(k=h.document.head&&h.document.head.querySelector("meta[name='amp-cookie-scope']"))k=k.getAttribute("content")||"",n=P(bb(h.location.href)).origin,k=na(n,"."+k)?k:n.split("://")[1];else{if(!Q(h.location.href)){k=h.location.hostname.split(".");n=k[k.length-1];var q;for(q="-test-amp-cookie-tmp";jb(h,q);)q="-test-amp-cookie-tmp0";for(var za=k.length-2;0<=za;za--)if(n=k[za]+"."+n,kb(h,q,"delete",Date.now()+1e3,n),"delete"==jb(h,q)){kb(h,q,"delete",Date.now()-1e3,n);k=n;break a}}k=null}kb(h,b,e,f,k,g.sameSite,g.secure)}})).catch((function(e){A().error("amp-consent/cookie-writer","Error expanding cookie string",e)}))}function V(){this.W=0;this.eb=m();this.bb=function(){};this.cb=function(){}}V.prototype.onQueueEmpty=function(a){this.bb=a;0==this.W&&a()};V.prototype.onQueueNotEmpty=function(a){this.cb=a;0<this.W&&a()};V.prototype.registerUI=function(a){var b=this;0==this.W&&this.cb();this.W++;var c=this.eb.then((function(){return a().then((function(){b.W--;0==b.W&&b.bb()}))}));return this.eb=c};function W(a){var b=this;this.sa=a;this.L=v();this.$a=null;this.Na=0;a.setOnPolicyChange((function(){dc(b)}))}W.prototype.handleTcfCommand=function(a,b){if(ec(a.__tcfapiCall)){var c=a.__tcfapiCall;switch(c.command){case"ping":fc(this,c,b);break;case"getTCData":gc(this,c,b);break;case"addEventListener":this.L[this.Na]||(this.L[this.Na]={payload:c,win:b},this.Na++);break;case"removeEventListener":a=c.callId;c=c.parameter;var d=!!this.L[c];d&&delete this.L[c];hc(b,void 0,a,d)}}};function dc(a){Object.keys(a.L).length&&ic(a).then((function(b){var c=b[2];if(c&&c!==a.$a){a.$a=c;for(var d=Object.keys(a.L),e=0;e<d.length;e++){var f=Number(d[e]);if(t.call(a.L,f)){var h=a.L[f],g=h.win;h=h.payload.callId;var k=jc(b[0],b[1],c,f);hc(g,k,h,!0)}}}}))}function ic(a){var b=a.sa.getConsentStringInfo("default"),c=a.sa.getConsentMetadataInfo("default");a=a.sa.getMergedSharedData("default");return Promise.all([c,a,b])}function gc(a,b,c){ic(a).then((function(d){d=jc(d[0],d[1],d[2]);hc(c,d,b.callId,!0)}))}function jc(a,b,c,d){var e=a?a.purposeOne:void 0,f=a?a.gdprApplies:void 0,h=Object.assign({},b,{additionalConsent:a?a.additionalConsent:void 0});return{tcfPolicyVersion:2,gdprApplies:f,tcString:c,listenerId:d,cmpStatus:"loaded",eventStatus:"tcloaded",purposeOneTreatment:e,additionalData:h}}function fc(a,b,c){a.sa.getConsentMetadataInfo("default").then((function(d){d=kc(d);hc(c,d,b.callId)}))}function kc(a){return{gdprApplies:a?a.gdprApplies:void 0,cmpLoaded:!0,cmpStatus:"loaded",tcfPolicyVersion:2}}function hc(a,b,c,d){a&&a.postMessage({__tcfapiReturn:{returnValue:b,callId:c,success:d}},"*")}function ec(a){if(!u(a))return A().error("amp-consent",'"tcfapiCall" is not an object: '+a),!1;var b=a.command,c=a.parameter;a=a.version;return"getTCData"!==b&&"ping"!==b&&"addEventListener"!==b&&"removeEventListener"!==b?(A().error("amp-consent",'Unsupported command found in "tcfapiCall": '+b),!1):c&&"removeEventListener"!=b?(A().error("amp-consent",'Unsupported parameter found in "tcfapiCall": '+c),!1):2!==a?(A().error("amp-consent",'Found incorrect version in "tcfapiCall": '+a),!1):!0}W.prototype.yb=function(a){return kc(a)};W.prototype.zb=function(a,b,c,d){return jc(a,b,c,d)};function X(a){a=AMP.BaseElement.call(this,a)||this;a.o=null;a.Z=null;a.hb=null;a.ea=null;a.M=null;a.D=null;a.Oa=null;a.ta=null;a.oa=null;a.S=!1;a.Za=!1;a.Fa=!1;a.Sa=a.getVsync();a.va=null;a.Y=null;a.da=null;a.ha=null;return a}var Y=AMP.BaseElement;X.prototype=ca(Y.prototype);X.prototype.constructor=X;if(ja)ja(X,Y);else for(var Z in Y)if("prototype"!=Z)if(Object.defineProperties){var lc=Object.getOwnPropertyDescriptor(Y,Z);lc&&Object.defineProperty(X,Z,lc)}else X[Z]=Y[Z];X.Bb=Y.prototype;l=X.prototype;l.getConsentPolicy=function(){return null};l.buildCallback=function(){var a=this;C(this.element.getAttribute("id"),"amp-consent should have an id");var b=new ub(this.element);return b.getConsentConfigPromise().then((function(c){a.da=b.getMatchedGeoGroup();mc(a,c)}))};l.pauseCallback=function(){this.M&&this.M.pause()};l.resumeCallback=function(){this.M&&this.M.resume()};function mc(a,b){a.D=b;a.Y=a.D.consentInstanceId;a.D.postPromptUI&&(a.ta=new Mb(a,w({}),a.D.postPromptUI));b=a.D.policy||w({});a.Oa=Ab(b,a.Y);b=Oa(a.element);for(var c=0;c<b.length;c++){var d=b[c];U(d,!1);J(a.element,"owners").setOwner(d,a.element)}var e=M(a.getAmpDoc(),"consentPolicyManager").then((function(g){a.Z=g;a.Z.setLegacyConsentInstanceId(a.Y);var k=Object.keys(a.Oa);for(g=0;g<k.length;g++)a.Z.registerConsentPolicyInstance(k[g],a.Oa[k[g]])}));b=M(a.getAmpDoc(),"consentStateManager").then((function(g){g.registerConsentInstance(a.Y,a.D);a.o=g}));var f=M(a.getAmpDoc(),"notificationUIManager").then((function(g){a.ea=g})),h=a.D.cookies?new bc(a.win,a.element,a.D).write():m();Promise.all([b,f,e,h]).then((function(){a.P()}))}function nc(a){a.registerAction("accept",(function(b){oc(a,"accept",b)}));a.registerAction("reject",(function(b){oc(a,"reject",b)}));a.registerAction("dismiss",(function(){oc(a,"dismiss")}));a.registerAction("setPurpose",(function(b){b&&b.args&&Object.keys(b.args).length?(b=b.args,pc(a)&&(qc(b),a.o.updateConsentInstancePurposes(b))):B().error("amp-consent","Must have arugments for `setPurpose`.")}));a.registerAction("prompt",(function(b){(b=b.args)&&!0===b.expireCache&&a.o.setDirtyBit();rc(a,!0)}));sc(a)}function oc(a,b,c){pc(a)&&tc(a,b,c).then((function(){uc(a,b)}))}function sc(a){a.win.addEventListener("message",(function(b){if(a.S){var c=b.data;if(c&&"consent-response"==c.type)if(c.action){if(void 0!==c.info){"string"!=typeof c.info&&(A().error("amp-consent","consent-response info only supports string, %s, treated as undefined",c.info),c.info=void 0);"dismiss"===c.action&&(c.info&&a.user().error("amp-consent","Consent string value %s not applicable on user dismiss, stored value will be kept and used",c.info),c.info=void 0);var d=c.info;var e=vc(c.consentMetadata)}for(var f=a.element.querySelectorAll("iframe"),h=0;h<f.length;h++)if(f[h].contentWindow===b.source){var g=c,k=g.action;g=g.purposeConsents;"accept"!==k&&"reject"!==k&&"dismiss"!==k||!pc(a)||(g&&Object.keys(g).length&&"dismiss"!==k&&(qc(g),a.o.updateConsentInstancePurposes(g)),uc(a,k,d,e))}}else A().error("amp-consent","consent-response message missing required info")}}))}function rc(a,b){a.ea||B().error("amp-consent","notification ui manager not found");!a.Fa&&a.M&&(a.Fa=!0,a.ea.registerUI(a.tb.bind(a,b)))}l.tb=function(a){var b=this;this.S&&B().error("amp-consent","Attempt to show an already displayed prompt UI");this.Sa.mutate((function(){b.M.show(a);b.S=!0}));var c=new p;this.oa=c.resolve;return c.promise};function pc(a){return a.o?a.S:(B().error("amp-consent","No consent state manager"),!1)}function uc(a,b,c,d){a.Za=!0;"accept"==b?a.o.updateConsentInstanceState(1,c,d):"reject"==b?a.o.updateConsentInstanceState(2,c,d):"dismiss"==b&&a.o.updateConsentInstanceState(3);a.S||B().error("amp-consent","%s no consent ui to hide");a.M.hide();a.S=!1;a.oa&&(a.oa(),a.oa=null);a.Fa=!1}function tc(a,b,c){var d;return"boolean"!==typeof(null==c?void 0:null==(d=c.args)?void 0:d.purposeConsentDefault)?m():"dismiss"===b?(B.warn("amp-consent","Dismiss cannot have a `purposeConsentDefault` parameter."),m()):wc(a).then((function(e){if(e&&e.length){var f={},h=c.args.purposeConsentDefault;e.forEach((function(g){f[g]=h}));a.o.updateConsentInstancePurposes(f,!0)}}))}l.P=function(){var a=this;xc(this);yc(this);zc(this);Ac(this).then((function(b){return Bc(a,b)})).then((function(b){b&&Cc(a);a.Z.enableTimeout()})).catch((function(){}));nc(this)};function Ac(a){return a.o.getConsentInstanceInfo().then((function(b){if(Ga(b))return Promise.resolve(!0);var c=a.D.consentRequired;return"boolean"===typeof c?Promise.resolve(c):Dc(a).then((function(d){return d?void 0!==d.consentRequired?!!d.consentRequired:!!d.promptIfUnknown:!1}))}))}function xc(a){var b=Dc(a).then((function(c){return c&&void 0!==c.sharedData?c.sharedData:null}));a.o.setConsentInstanceSharedData(b)}function yc(a){Dc(a).then((function(b){if(b&&((b.expireCache||b.forcePromptOnNext)&&a.o.setDirtyBit(),b.consentRequired&&!a.Za)){var c=b.consentString||void 0,d=b.consentMetadata,e=b.purposeConsents;b=b.consentStateValue;b="accepted"===b?1:"rejected"===b?2:"unknown"===b?5:null;null!==b&&(e&&u(e)&&Object.keys(e).length&&(qc(e),a.o.updateConsentInstancePurposes(e)),a.o.updateConsentInstanceState(b,c,vc(d)))}}))}function Dc(a){if(a.va)return a.va;var b=a.D.checkConsentHref;a.va=b?a.o.getLastConsentInstanceInfo().then((function(c){var d={credentials:"include",method:"POST",body:w({consentInstanceId:a.Y,consentStateValue:F(c.consentState),consentMetadata:c.consentMetadata,consentString:c.consentString,isDirty:!!c.isDirty,matchedGeoGroup:a.da,purposeConsents:c.purposeConsents,clientConfig:a.D.clientConfig})};ab(b,a.element);c=a.getAmpDoc();var e=bb(c.getUrl()),f=cb(b,e),h=H(a.win,"xhr");return c.whenFirstVisible().then((function(){return rb(a.element,f).then((function(g){return h.fetchJson(g,d).then((function(k){return h.xssiJson(k,a.D.xssiPrefix).catch((function(n){A().error("amp-consent","Could not parse the `checkConsentHref` response.",n)}))}))}))}))})):Promise.resolve(null);return a.va}function Ec(a,b){return wc(a).then((function(c){if(null==c||!c.length)return a.o.hasAllPurposeConsents(),!0;var d=b.purposeConsents;if(!d||Object.keys(d).length<c.length)return!1;for(var e=0;e<c.length;e++)if(!t.call(d,c[e]))return!1;a.o.hasAllPurposeConsents();return!0}))}function wc(a){if(a.ha)return a.ha;var b=a.D.purposeConsentRequired;r(b)?a.ha=Promise.resolve(b):a.ha=Dc(a).then((function(c){return c&&r(c.purposeConsentRequired)?c.purposeConsentRequired:null}));return a.ha}function Fc(a){return a.o.getConsentInstanceInfo().then((function(b){return Ga(b)?Ec(a,b):Promise.resolve(!1)}))}function Bc(a,b){a.M=new Mb(a,a.D);return Fc(a).then((function(c){if(c)return!0;if(!b)return a.o.updateConsentInstanceState(4),!1;rc(a,!1);return!0}))}function Cc(a){a.ta&&(a.ea.onQueueEmpty((function(){a.Sa.mutate((function(){a.ta.show(!1)}))})),a.ea.onQueueNotEmpty((function(){a.Sa.mutate((function(){a.ta.hide()}))})))}l.wb=function(){return this.o};l.vb=function(){return Ac(this)};l.xb=function(){return this.S};function qc(a){Object.keys(a).forEach((function(b){a[b]}))}function vc(a){if(a){if(u(a)){var b=a.consentStringType,c=a.additionalConsent,d=a.gdprApplies,e=a.purposeOne,f=[];b&&1!==b&&2!==b&&3!==b&&(delete a.consentStringType,f.push("consentStringType"));c&&"string"!=typeof c&&(delete a.additionalConsent,f.push("additionalConsent"));d&&"boolean"!=typeof d&&(delete a.gdprApplies,f.push("gdprApplies"));e&&"boolean"!=typeof e&&(delete a.purposeOne,f.push("purposeOne"));for(b=0;b<f.length;b++)A().error("amp-consent",'Consent metadata value "%s" is invalid.',f[b]);return Ea(a.consentStringType,a.additionalConsent,a.gdprApplies,a.purposeOne)}A().error("amp-consent","CMP metadata is not an object.")}}function zc(a){if(a.D.exposesTcfApi&&!a.win.frames.__tcfapiLocator){a.hb=new W(a.Z);a.win.addEventListener("message",(function(c){var d=c.data;d&&d.__tcfapiCall&&a.hb.handleTcfCommand(d,c.source)}));var b=a.element.ownerDocument.createElement("iframe");b.setAttribute("name","__tcfapiLocator");b.setAttribute("aria-hidden","true");U(b,!1);a.element.appendChild(b)}}AMP.registerElement("amp-consent",X,"amp-consent{position:fixed!important;bottom:0;left:0;overflow:hidden!important;background:hsla(0,0%,100%,0.7);width:100%;z-index:2147483645}amp-consent[i-amphtml-notbuilt]>*{display:none!important}amp-consent>*{max-height:100vh!important}amp-consent.amp-active{visibility:visible}amp-consent.amp-hidden{visibility:hidden}@keyframes amp-consent-ui-placeholder-spin{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}.i-amphtml-consent-ui-placeholder{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.i-amphtml-consent-ui-placeholder>svg{width:30px;height:30px;fill:none;stroke-width:1.5px;transform-origin:50% 50%;animation:amp-consent-ui-placeholder-spin 1000ms linear infinite}.i-amphtml-consent-alertdialog{overflow:hidden;position:absolute;height:1px;width:1px;top:auto;left:auto}.i-amphtml-consent-ui-fill{position:absolute;top:0;left:0;width:100%}iframe.i-amphtml-consent-ui-fill{border:none}amp-consent.i-amphtml-consent-ui-iframe-active{width:100%!important;height:100%!important;padding:0px!important;margin:0px!important;overflow:auto!important;transform:translate3d(0px,100vh,0px)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-modal{box-sizing:border-box;top:0;right:0;animation:i-amphtml-modal-appear 0.5s;animation-fill-mode:forwards;height:var(--i-amphtml-modal-height)!important;width:90vw!important;margin:auto!important;max-width:760px}amp-consent.i-amphtml-consent-ui-border-enabled{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important}amp-consent.i-amphtml-consent-ui-modal.i-amphtml-consent-ui-border-enabled{border-radius:8px!important;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-iframe-transform{transform:translate3d(0px,calc(100% - var(--i-amphtml-modal-height)),0px)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in{transition:transform 0.5s ease-out!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen{top:0px!important;transform:translateZ(0px)!important;border-top-left-radius:0px!important;border-top-right-radius:0px!important}amp-consent.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen>.i-amphtml-consent-ui-fill{height:100%!important}@keyframes i-amphtml-consent-ui-mask{0%{opacity:0.0}to{opacity:0.2}}@keyframes i-amphtml-modal-appear{0%{transform:translateY(100vh);opacity:0}to{transform:translate(0);opacity:1}}.i-amphtml-consent-ui-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;animation:i-amphtml-consent-ui-mask 0.25s ease-in;background-image:none!important;background-color:#000;z-index:2147483644}\n/*# sourceURL=/extensions/amp-consent/0.1/amp-consent.css*/");AMP.registerServiceForDoc("notificationUIManager",V);AMP.registerServiceForDoc("consentStateManager",nb);AMP.registerServiceForDoc("consentPolicyManager",Db)}});//# sourceMappingURL=amp-consent-0.1.js.map