!function(){"use strict";var t,e,n,r,o=function(t,e){return{name:t,value:void 0===e?-1:e,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},i=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},a=function(t,e){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},c=function(t){addEventListener("pageshow",(function(e){e.persisted&&t(e)}),!0)},u=function(t,e,n){var r;return function(o){e.value>=0&&(o||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},s=-1,p=function(){return"hidden"===document.visibilityState?0:1/0},f=function(){a((function(t){var e=t.timeStamp;s=e}),!0)},d=function(){return s<0&&(s=p(),f(),c((function(){setTimeout((function(){s=p(),f()}),0)}))),{get firstHiddenTime(){return s}}},m=function(t,e){var n,r=d(),a=o("FCP"),s=function(t){"first-contentful-paint"===t.name&&(f&&f.disconnect(),t.startTime<r.firstHiddenTime&&(a.value=t.startTime,a.entries.push(t),n(!0)))},p=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],f=p?null:i("paint",s);(p||f)&&(n=u(t,a,e),p&&s(p),c((function(r){a=o("FCP"),n=u(t,a,e),requestAnimationFrame((function(){requestAnimationFrame((function(){a.value=performance.now()-r.timeStamp,n(!0)}))}))})))},v=!1,l=-1,b=function(t,e){v||(m((function(t){l=t.value})),v=!0);var n,r=function(e){l>-1&&t(e)},s=o("CLS",0),p=0,f=[],d=function(t){if(!t.hadRecentInput){var e=f[0],r=f[f.length-1];p&&t.startTime-r.startTime<1e3&&t.startTime-e.startTime<5e3?(p+=t.value,f.push(t)):(p=t.value,f=[t]),p>s.value&&(s.value=p,s.entries=f,n())}},b=i("layout-shift",d);b&&(n=u(r,s,e),a((function(){b.takeRecords().map(d),n(!0)})),c((function(){p=0,l=-1,s=o("CLS",0),n=u(r,s,e)})))},g={passive:!0,capture:!0},w=new Date,h=function(r,o){t||(t=o,e=r,n=new Date,T(removeEventListener),y())},y=function(){if(e>=0&&e<n-w){var o={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e};r.forEach((function(t){t(o)})),r=[]}},S=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){h(t,e),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,g),removeEventListener("pointercancel",r,g)};addEventListener("pointerup",n,g),addEventListener("pointercancel",r,g)}(e,t):h(e,t)}},T=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,S,g)}))},E=function(n,s){var p,f=d(),m=o("FID"),v=function(t){t.startTime<f.firstHiddenTime&&(m.value=t.processingStart-t.startTime,m.entries.push(t),p(!0))},l=i("first-input",v);p=u(n,m,s),l&&a((function(){l.takeRecords().map(v),l.disconnect()}),!0),l&&c((function(){var i;m=o("FID"),p=u(n,m,s),r=[],e=-1,t=null,T(addEventListener),i=v,r.push(i),y()}))},O=new Set,L=function(t,e){var n,r=d(),s=o("LCP"),p=function(t){var e=t.startTime;e<r.firstHiddenTime&&(s.value=e,s.entries.push(t)),n()},f=i("largest-contentful-paint",p);if(f){n=u(t,s,e);var m=function(){O.has(s.id)||(f.takeRecords().map(p),f.disconnect(),O.add(s.id),n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,m,{once:!0,capture:!0})})),a(m,!0),c((function(r){s=o("LCP"),n=u(t,s,e),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,O.add(s.id),n(!0)}))}))}))}},P=function(t){var e,n=o("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();if(n.value=n.delta=e.responseStart,n.value<0)return;n.entries=[e],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)};function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function C(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){D(i,r,o,a,c,"next",t)}function c(t){D(i,r,o,a,c,"throw",t)}a(void 0)}))}}var F,R=Date.now(),x={"www.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-prod-4591.cloudfunctions.net/report-endpoint","www.test.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","www.test.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.int.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.test.api.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.int.api.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","navigation.test.api.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","local.dev.bbc.co.uk":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint","local.dev.bbc.com":"https://europe-west1-bbc-otg-traf-mgr-bq-dev-4105.cloudfunctions.net/report-endpoint"}[window.location.hostname],A=Math.random()<=.1,B=document.currentScript.getAttribute("data-ux"),H=document.currentScript.getAttribute("data-release"),M=document.currentScript.getAttribute("data-reqjs");(F=C(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.bbcuser.allowsPerformanceCookies();case 2:e=t.sent,x&&navigator.sendBeacon&&A&&e&&(n={cls:null,fid:null,lcp:null,fcp:null,ttfb:null},b(r=function(t){var e=t.name,r=t.value,o=e.toLowerCase();n[o]=r},!0),E(r),L(r,!0),m(r),P(r),window.addEventListener("pagehide",C(regeneratorRuntime.mark((function t(){var e,r,o,i,a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.bbcpage.getDestination();case 2:return e=t.sent,t.next=5,window.bbcpage.getContentType();case 5:r=t.sent,o="".concat(x,"?platform=").concat(B,"-").concat(H,"&owner=").concat(e,"&pageType=").concat(r,"&realReqJS=").concat(M),i=[{type:"web-vitals",url:window.location.href,age:Date.now()-R,body:k({},n)}],a=JSON.stringify(i),c=new Blob([a],{type:"application/reports+json"}),navigator.sendBeacon(o,c);case 12:case"end":return t.stop()}}),t)})))));case 4:case"end":return t.stop()}}),t)}))),function(){return F.apply(this,arguments)})()}();
//# sourceMappingURL=performance.bundle.js.map