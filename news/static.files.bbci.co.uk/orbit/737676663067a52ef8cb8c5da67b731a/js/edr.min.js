!function(){var e={inherits:function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i,e.superclass=t.prototype,e.prototype.constructor=e},setStyleAttribute:function(e,t){e.style.setAttribute?e.style.setAttribute("cssText",t):e.setAttribute("style",t)},setStyleBlock:function(e,t){if(e.styleSheet)e.styleSheet.cssText=t;else{if(e.hasChildNodes())for(;1<=e.childNodes.length;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},getStyle:function(e,t){var i;return e.currentStyle?i=e.currentStyle[t]:window.getComputedStyle&&(i=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),i},addEvent:function(t,i,o,e){t.addEventListener?t.addEventListener(i,o,e||!1):t.attachEvent?(t["e"+i+o]=o,t[i+o]=function(){var e=window.event,e={target:e.srcElement,type:e.type,keyCode:e.keyCode};t["e"+i+o](e)},t.attachEvent("on"+i,t[i+o])):t["on"+i]=t["e"+i+o]},addEvents:function(e,t,i,o){for(var n=0;n<t.length;++n)this.addEvent(e,t[n],i,o)},matchesSelector:function(e,t){for(var i=document.querySelectorAll(t),o=0;o<i.length;++o)if(i[o]===e)return!0;return!1},findFixedPos:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top}},getViewportSize:function(){var e=0,t=0,t=window.innerWidth?(e=window.innerWidth,window.innerHeight):0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,document.documentElement.clientHeight):(e=document.body.clientWidth,document.body.clientHeight);return{x:e,y:t}},createCookie:function(e,t,i,o){var n=i?((n=new Date).setTime(n.getTime()+24*i*60*60*1e3),"; expires="+n.toGMTString()):"",n=e+"="+t+n+"; path=/";o&&(n+=";domain="+o),document.cookie=n},readCookie:function(e,t){for(var i=e+"=",o=document.cookie.split(";"),n=[],r=0;r<o.length;r++){for(var s=o[r];" "===s.charAt(0);)s=s.substring(1,s.length);0===s.indexOf(i)&&n.push(s.substring(i.length,s.length))}return 0===n.length?null:t?n.join(t):n[0]},readCookiesWithPrefix:function(e){for(var t=document.cookie.split(";"),i={},o=0;o<t.length;o++){for(var n=t[o];" "===n.charAt(0);)n=n.substring(1,n.length);var r=n.split("=");0===r[0].indexOf(e)&&(i[r[0]]=r[1])}return i},eraseCookie:function(e,t){this.createCookie(e,"",-1,t)},areCookiesEnabled:function(){var e=!1,t="edr_sc_tst";return this.createCookie(t,"tst_val",1),null!==this.readCookie(t)&&(e=!0,this.eraseCookie(t)),e},getFlashVersion:function(){var t=null;function i(e){return(e=e.match(/[\d]+/g)).length=3,e.join(".")}if(navigator.plugins&&navigator.plugins.length){var e=navigator.plugins["Shockwave Flash"];e&&e.description?t=i(e.description):navigator.plugins["Shockwave Flash 2.0"]&&(t="2.0.0.11")}else if(navigator.mimeTypes&&navigator.mimeTypes.length){e=navigator.mimeTypes["application/x-shockwave-flash"];e&&e.enabledPlugin&&(t=i(e.enabledPlugin.description))}else try{t=i(new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7").GetVariable("$version"))}catch(e){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="6.0.21"}catch(e){try{t=i(new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version"))}catch(e){}}}return t||null},clone:function(e){if(null===e||"object"!=typeof e)return e;var t,i=e.constructor();for(t in e)e.hasOwnProperty(t)&&(i[t]=this.clone(e[t]));return i},_ifrRequestCount:0,postToUrl:function(r,s,e,a,l){var h="iframe_req_"+ ++this._ifrRequestCount,d=document.createElement("iframe"),t=e&&"Microsoft Internet Explorer"===navigator.appName;t&&(d.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"),d.setAttribute("id",h),d.setAttribute("name",h),d.setAttribute("tabindex",-1),this.setStyleAttribute(d,"position:absolute;left:-100000px;top:-100000px;"),document.body.appendChild(d),(d=window.frames&&window.frames[h]?window.frames[h]:d).name=h;e=function(){d.contentDocument||d.document;l=l||"post";var e,t,i,o=document.createElement("form");for(e in o.setAttribute("method",l),o.setAttribute("action",r),s)s.hasOwnProperty(e)&&((t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name",e),i="object"==typeof(i=s[e])?JSON.stringify(i):i,t.setAttribute("value",i),o.appendChild(t));o.setAttribute("target",h),document.body.appendChild(o),o.submit();var n=function(){var e=null;try{e=d.contentDocument||d.document}catch(e){}e?setTimeout(n,10):(document.body.removeChild(o),document.body.removeChild(document.getElementById(h)),a&&a())};setTimeout(n,10)};t?setTimeout(e,1):e()},genGuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},arrayIndexOf:function(e,t){"use strict";if(Array.prototype.indexOf)return e.indexOf(t);if(null===e)throw new TypeError;var i=Object(e),o=i.length>>>0;if(0==o)return-1;e=0;if(2<arguments.length&&((e=Number(arguments[2]))!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(0<e||-1)*Math.floor(Math.abs(e)))),o<=e)return-1;for(var n=0<=e?e:Math.max(o-Math.abs(e),0);n<o;n++)if(n in i&&i[n]===t)return n;return-1},isIEOrEdge:function(){return!!(document.all&&document.querySelector||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style||/Edge\/\d+./i.test(navigator.userAgent))},isAndroid:function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")},isIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},iOSVersion:function(){if(this.isIOS()){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}},executesInactiveTabs:function(){var e=this.iOSVersion();return!e||8<=e[0]},getVisibilityChangeEventNames:function(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilitychange:t}}};window.EDRUtility=e}(),function(){var u=window.EDRUtility,n={createFromConfig:function(e){var t,i={};if(e)for(var o in e)!e.hasOwnProperty(o)||(t=n.Probe.create(o,e[o]))&&(i[o]=t);return i},execute:function(e,t,i){var o,n,r,s={};for(o in t)t.hasOwnProperty(o)&&("push"==(n=t[o]).config.kind&&(r=i[n.config.code],n.pushedValue=void 0!==r?r:null),s[o]=n.getValue(e));return s},Probe:function(e,t){this.config=t,this.pushedValue=null}};n.Probe.create=function(e,t){switch(t.kind){case"resultHistory":return new n.Probe.ResultHistory(e,t);case"cookieValue":case"elementContent":case"pageUrl":return new n.Probe.String(e,t);case"cookieExists":case"elementExists":case"elementVisible":return new n.Probe.Boolean(e,t);case"elementCount":return new n.Probe.Number(e,t);case"push":switch(t.type){case"bool":return new n.Probe.Boolean(e,t);case"string":return new n.Probe.String(e,t);case"number":return new n.Probe.Number(e,t);default:return null}break;default:return null}},n.Probe.String=function(e,t){try{this._regEx=t.regex?new RegExp(t.regex):null}catch(e){}this._returnAll=!1,this._returnIndex=0,this._visibleOnly=!0===t.visibleOnly,t.returnAll?this._returnAll=!0:this._returnIndex=t.index||0,n.Probe.call(this,e,t)},u.inherits(n.Probe.String,n.Probe),n.Probe.String.prototype.getValue=function(e){var t=[];switch(this.config.kind){case"cookieValue":var i=u.readCookie(this.config.cookieName);i&&t.push(i);break;case"elementContent":for(var o,n=e.document.querySelectorAll(this.config.selector),r=0;r<n.length;++r)this._visibleOnly&&0===n[r].offsetWidth||(o=n[r].textContent||n[r].innerText,t.push(o));break;case"pageUrl":t.push(e.document.location.href);break;case"push":t.push(this.pushedValue)}if(this._regEx){for(var s=[],a=0;a<t.length;++a){var l=this._regEx.exec(t[a]);if(l&&1===l.length)s.push(t[a]);else if(l)for(var h=1;h<l.length;++h)s.push(l[h])}t=s}if(this._returnAll)return t;var d=this._returnIndex;return d<0||d>=t.length?null:t[d]},n.Probe.Boolean=function(e,t){n.Probe.call(this,e,t)},u.inherits(n.Probe.Boolean,n.Probe),n.Probe.Boolean.prototype.getValue=function(e){var t=!1;switch(this.config.kind){case"cookieExists":t=null!==u.readCookie(this.config.cookieName);break;case"elementExists":t=null!==e.document.querySelector(this.config.selector);break;case"elementVisible":for(var i=e.document.querySelectorAll(this.config.selector),o=0;o<i.length;++o)if(0!==i[o].offsetWidth){t=!0;break}break;case"push":t=this.pushedValue}return t=this.config.not?!t:t},n.Probe.Number=function(e,t){n.Probe.call(this,e,t)},u.inherits(n.Probe.Number,n.Probe),n.Probe.Number.prototype.getValue=function(e){switch(this.config.kind){case"elementCount":return e.document.querySelectorAll(this.config.selector).length;case"push":return this.pushedValue}},n.Probe.ResultHistory=function(e,t){this._allowDuplicates=!0===t.allowDuplicates,this._innerProbe=n.Probe.create(e+"_inner",t.innerProbe),this._lastResult=null,this._collection=[],n.Probe.call(this,e,t)},u.inherits(n.Probe.ResultHistory,n.Probe),n.Probe.ResultHistory.prototype.getValue=function(e){var t=this._innerProbe.getValue(e);if(JSON.stringify(t)===JSON.stringify(this._lastResult))return this._collection;this._lastResult=t;for(var t="[object Array]"===Object.prototype.toString.call(t)?t:[t],i=0;i<t.length;++i){if(!this._allowDuplicates){for(var o=!1,n=0;n<this._collection.length;++n)if(t[i]===this._collection[n].val){o=!0;break}if(o)continue}this._collection.push({dt:Math.round((new Date).getTime()/1e3),val:t[i]})}return this._collection},this.EDRSurveyCodeProbes=n}(),function(h,s,d,a){var l={_lastChannelId:0,Rpc:function(e,t){if(t.local)for(var i in t.local){var o;!t.local.hasOwnProperty(i)||"function"==typeof(o=t.local[i])&&(t.local[i]={method:o})}var n="edr"+l._lastChannelId++,r=s.createElement("iframe");return r.id=r.name=e.props.id,r.border=r.frameBorder=0,r.allowTransparency=!0,r.src=e.remote+"&xdm_o="+a(l._getLocation(h.location.toString()))+"&xdm_c="+n,s.getElementById(e.container).appendChild(r),new l.RpcBehaviour(e,t,r,l._getLocation(e.remote),n)},_getLocation:function(e){var t=e.toLowerCase().match(/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/),i=t[2],e=t[3],t=t[4]||"";return i+"//"+e+(t="http:"===i&&":80"===t||"https:"===i&&":443"===t?"":t)}};l.RpcBehaviour=function(o,n,r,s,a){var e,l=!1;for(e in n.remote)n.remote.hasOwnProperty(e)&&(this[e]=function(t){var i=Array.prototype.slice;return function(){var e={method:t,params:i.call(arguments,0)};r.contentWindow.postMessage(JSON.stringify(e),s)}}((n.remote[e],e)));function t(e){if(e.origin===s){var t,i;try{i=JSON.parse(e.data)}catch(e){return}i.channel===a&&(i.internal?l||"-ready-"===i.internal&&(d(o.onReady,0),l=!0):(i.method,t=n.local[i.method],i=i.params,t.method.apply(t.scope,i)))}}h.addEventListener?h.addEventListener("message",t,!1):h.attachEvent("onmessage",t)},this.eDRXDMClient=l,this.eDRXDMClient.Rpc=l.Rpc}(window,document,window.setTimeout,encodeURIComponent),function(g,y,c,u,s,a,p,_){var f,n=this,m=g.EDRUtility,i=g.EDRSurveyCodeProbes;void 0===n.EDRSurvey?((f={TRACKING_COOKIE_NAME:"eds_uuid",TRACKING_DAYS_DISABLED:-1,PageState:{pageViewCount:0,documentDomainExplicitlySet:!1,_timeLoaded:null,init:function(){if(this._timeLoaded=new Date,this.documentDomainExplicitlySet=y.location.hostname!==y.domain,!this.documentDomainExplicitlySet){var e=y.createElement("iframe");y.body.appendChild(e);try{e.contentWindow.document}catch(e){this.documentDomainExplicitlySet=!0}e.parentNode.removeChild(e)}},getMillisecondsSincePageLoad:function(){return new Date-this._timeLoaded}},Layer:function(t,e,i){t=t||null,this.MAX_WAIT_FOR_CONFIGURE=3e4,this.MAX_WAIT_FOR_LOAD=1250,this.MAX_HIDE_TIME=2e3,this.HIDDEN_STYLE="position:absolute;left:-100000px;top:-100000px;width:100%;height:100%;",this.id=t,this.logId=t||"initial",this.name=null,this.div=null,this.iframe=null,this.showing=!1,this.everShown=!1,this.everShownOnPage=!1,this._deploymentId=null,this._rootDeploymentId=e,this._rootLanguage=i,this._rpc=null,this._styleBlock=null,this._divId="edr_lwrap_"+(t||"first"),this._iframeId="edr_l_"+(t||"first"),this._iframeStyles=null,this._positioner=null,this._layout=null,this._deploy={},this._ticker=null,this._initialised=!1,this._configured=!1,this._triggeringElement=null,this._globalConditionals=[],this._triggers=[],this._configureTimeoutTimer=null,this._iframeCheckTimeoutTimer=null,this._globalConditionalsHidShowingLayerTrigger=null,this._hiding=!1,this._lightboxElement=null,this._lightboxAnimationStepper=null,this._probeConfiguration={},this._surveyWin=null,this._loggedCanShowEventDeniedShow=!1,this._clickToHide=!1,this._initialFocusHandled=!1;void 0!==g.postMessage&&g.postMessage;var o={xdm:"edr"};t&&(o.lid=t),i&&(o.rlang=i),f.Tester.log(5,this.logId,o.xdm);var n,r=this.div=y.createElement("div"),s=g.eDRXDMClient,e=y.getElementsByTagName("head")[0],i=this._styleBlock=y.createElement("style"),a=this;r.id=this._divId,r.className="edr_lwrap",r.setAttribute("title","Online Quality Survey"),r.setAttribute("aria-label","Online Quality Survey"),r.setAttribute("role","alertdialog"),y.getElementById("edr_survey").appendChild(r);var l=this;this._rpc=n=new s.Rpc({remote:f.Main.buildUrl("l",o),container:this._divId,props:{id:this._iframeId},onReady:function(){n.hostReady()}},{remote:{alertMessage:{},hostReady:{},onShown:{},onHidden:{},requestMetrics:{},onAnchorEdgesChanged:{},hide:{},prepareSurvey:{},setHoverState:{},setFocusState:{},onConfigured:{},focusFirst:{}},local:{alertMessage:function(e){alert("received by survey code: "+e)},initialise:function(e,t){a.initialise(e,t)},configureLayer:function(e,t,i,o,n,r){a.configure(e,t,i,o,n,r)},hide:function(){a.hide()},forceHide:function(){a.forceHide()},showLightbox:function(){a.showLightbox()},hideLightbox:function(){a.hideLightbox()},destroyLayer:function(){a.destroy("close")},deployAdditionalLayers:function(e){for(var t=0;t<e.length;t++)f.Main.deployLayer(e[t])},deployAdditionalDeployments:function(e){for(var t=0;t<e.length;t++)f.Main.deployDeployment(e[t],l._rootDeploymentId,l._rootLanguage)},triggerLayerByName:function(e){e=f.Main.getLayerByName(e);e&&e.trigger(a.div)},setMetrics:function(e,t){a._setMetrics(e,t)},activateTestMode:function(e){f.Tester.activate(e)},execute:function(){a.execute()},logServerItems:function(e){for(var t=0;t<e.length;++t)f.Tester.serverLog(a.logId,e[t])},updateCookie:function(e){m.createCookie(EDRSurvey.COOKIE_NAME,e,730,f.Main.DOMAIN)},log:function(e,t){f.Tester.providerLog(a.logId,e,t)}}}),i.type="text/css",e.appendChild(i),m.setStyleBlock(i,"#"+this._divId+" {"+this.HIDDEN_STYLE+"}");var h=function(){var e;l.iframe=y.getElementById(l._iframeId),l.iframe?(l.iframe.setAttribute("scrolling","no"),f.Main.onLayerInitialised(t,l),e=function(){var t=null;try{(t=l.iframe.contentWindow)[+new Date+""+Math.random()]="testdata"}catch(e){t=null}l._iframeCheckTimeoutTimer=t?c(e,10):c(function(){l._initialised||(f.Tester.log(42,l.logId,[l.MAX_WAIT_FOR_LOAD]),f.EventHub.raise(f.EventHub.LAYER_WONT_SHOW,{layer:this}),l.destroy())},l.MAX_WAIT_FOR_LOAD)},l._iframeCheckTimeoutTimer=c(e,10),l._configureTimeoutTimer=c(function(){f.Tester.log(12,l.logId,null,4),f.EventHub.raise(f.EventHub.LAYER_WONT_SHOW,{layer:this}),l.destroy()},l.MAX_WAIT_FOR_CONFIGURE),l._tick()):c(h,10)};h(),f.Tester.log(6,this.logId)}}).Layer.prototype.getName=function(){return this.name},f.Layer.prototype.getDeployment=function(){return new f.Deployment(this._deploy)},f.Layer.prototype.requestCurrentMetrics=function(){this._rpc.requestMetrics()},f.Layer.prototype.setHoverState=function(e,t){this._rpc.setHoverState(e,t)},f.Layer.prototype.setFocusState=function(e,t){this._rpc.setFocusState(e,t)},f.Layer.prototype.onAnchorEdgesChanged=function(e){this._rpc.onAnchorEdgesChanged(e)},f.Layer.prototype.initialise=function(e,t){!this._rootDeploymentId&&e&&(this._rootDeploymentId=e),t&&(this._rootLanguage=t),this._initialised=!0},f.Layer.prototype.configure=function(e,t,i,o,n,r){if(f.Tester.log(7,this.logId,e),this.name=e,this.iframe.className=f.Main.LAYER_IFRAME_CLASS+" edr_layer_name_"+e,this._iframeStyles=t,this._layout=o,this._deploy=n,this._probeConfiguration=r,this._deploymentId=this._parseDeploymentId(this._deploy.deploymentId)[0],o.lightbox&&!this._lightboxElement?this._createLightbox():!o.lightbox&&this._lightboxElement&&this._destroyLightbox(),o.clickToHide&&(this._clickToHide=!0),this._configureJSBehaviour(),this._triggers=[new f.TriggerManual],this._globalConditionals=[],i){var s,a=i.triggers,l=i.globalConditionals;if(a)for(s=0;s<a.length;++s)this._triggers.push(f.Trigger.create(a[s]));if(l)for(s=0;s<l.length;++s)this._globalConditionals.push(f.Conditional.create(l[s]))}var h="#"+this._divId+"{";h+=this.HIDDEN_STYLE+"z-index:"+f.Main.ZINDEX_ON_TOP+";";var d,i=y.getElementById(this._divId);for(d in i&&i.removeAttribute("style"),this._iframeStyles)this._iframeStyles.hasOwnProperty(d)&&(h+=d+":"+this._iframeStyles[d]+";");m.setStyleBlock(this._styleBlock,h+="}"),this.everShown=this._isPersistedCookieSet(),this._rpc.onConfigured({everShown:this.everShown}),f.EventHub.raise(f.EventHub.LAYER_INITIALISED,this),this._configured?this.showing&&this._show(this._triggeringElement):(this._configured=!0,u(this._configureTimeoutTimer),u(this._iframeCheckTimeoutTimer),this._configureTimeoutTimer=null,this._iframeCheckTimeoutTimer=null)},f.Layer.prototype._parseDeploymentId=function(e){return e?e.split("|"):(f.Tester.log(43,this.logId,null,3),null)},f.Layer.prototype._setOpacity=function(e,t,i){var o=Math.round(100*t);m.setStyleAttribute(e,"background-color:"+i+";opacity:"+t+";filter: alpha(opacity="+o+");display:block;")},f.Layer.prototype._tweenLbOpacity=function(e,t){var i=this._layout.lightbox,o=parseFloat(i.opacity);a(this._lightboxAnimationStepper);var n=e?1:0,r=this;this._lightboxAnimationStepper=s(function(){r._setOpacity(r._lightboxElement,n*o,i.colour),n+=e?-.05:.05,(!e&&1<=n||e&&n<=0)&&(a(r._lightboxAnimationStepper),r._lightboxAnimationStepper=null,t&&t())},10)},f.Layer.prototype._isPersistedCookieSet=function(){return!!m.readCookie(f.Main.COOKIE_FORCED_CONFIG_PREFIX+this.getDeploymentId())},f.Layer.prototype.showLightbox=function(){var e;this._lightboxElement&&((e=this._layout.lightbox).fade?this._tweenLbOpacity(!1):this._setOpacity(this._lightboxElement,e.opacity,e.colour),f.Main.flagLightboxDisplayed(this.id))},f.Layer.prototype.hideLightbox=function(){var e,t;this._lightboxElement&&(t=function(){m.setStyleAttribute(e._lightboxElement,""),f.Main.flagLightboxHidden(e.id)},(e=this)._layout.lightbox.fade?this._tweenLbOpacity(!0,t):t())},f.Layer.prototype.trigger=function(e){this._triggers[0].setTriggered(e)},f.Layer.prototype.onEvent=function(e){if(this._configured){if("keyup"===e.type&&27===e.keyCode&&this._lightboxElement&&this._lightboxElement.offsetWidth&&this.destroy("close"),e.target&&e.target.classList.contains(f.Main.GO_CLICK_CAPTURER_CLASS)&&this._positioner){if(!this._positioner.isClickCapturer(e.target))return;switch(e.type){case"click":this.execute();break;case"mouseover":this.setHoverState(e.target.id,!0);break;case"mouseout":this.setHoverState(e.target.id,!1);break;case"focus":this._clickCapturerFocusChanged(e.target.id,!0);break;case"blur":this._clickCapturerFocusChanged(e.target.id,!1)}}else"click"===e.type&&this._clickToHide&&this.showing&&this.hide();for(var t=0;t<this._triggers.length;++t)this._triggers[t].onEvent(e,f.PageState,this)}},f.Layer.prototype._clickCapturerFocusChanged=function(e,t){var i=this;c(function(){y.activeElement===i.iframe&&i.focusFirst()}),this.setFocusState(e,t)},f.Layer.prototype._tick=function(){if(u(this._ticker),this._configured){var e={layer:this,canShow:!0};f.EventHub.raise(f.EventHub.LAYER_CAN_SHOW,e);var t=e.canShow;if(t){for(var i=0;i<this._globalConditionals.length;++i)if(!this._globalConditionals[i].isTrue(null)){t=!1;break}}else this._loggedCanShowEventDeniedShow||(f.Tester.log(31,this.logId,null,4),this._loggedCanShowEventDeniedShow=!0);if(t){if(this._globalConditionalsHidShowingLayerTrigger)this._show(!0===this._globalConditionalsHidShowingLayerTrigger?null:this._globalConditionalsHidShowingLayerTrigger);else{for(var o=0;o<this._triggers.length;++o)this._triggers[o].evaluate(f.PageState,this);for(var n,r=null,s=!1,a=!1,o=0;o<this._triggers.length;++o)this._triggers[o].checkTriggerChanged()&&(s=!0,(n=this._triggers[o].getTriggeringElement())&&(a=!0,n!==g&&(r=n)));s&&(this.showing&&r&&r!==this._triggeringElement&&this.forceHide(!0),a&&!this.showing?this._show(r):!a&&this.showing&&this.hide())}this._globalConditionalsHidShowingLayerTrigger=null}else this.showing&&(this._globalConditionalsHidShowingLayerTrigger=this._triggeringElement||!0,this.forceHide(!0))}var l=this;this._ticker=c(function(){l._tick()},100)},f.Layer.prototype._show=function(e){if(f.Tester.log(8,this.logId,e),!this._configured)return!1;var t,i=m.clone(this._layout),o=i.position.relativeTo;if(!o)return this.destroy(),!1;switch(o){case"window":t=g;break;case"document":t=g.document;break;default:(t="trigger"===o?e:y.querySelector(o))||(t=g,i.position.edges=["top","left","bottom","right"],i.position.offset={x:0,y:0})}if(this.showing){if(!this._positioner)throw"EDRSurveyCode.PositionedLayer not available when showing in show()";this._positioner.destroy()}else m.setStyleAttribute(this.div,this.HIDDEN_STYLE),this._layout.lightbox&&this._layout.lightbox.show&&this.showLightbox();this._positioner=new f.PositionedLayer(this,t,this._iframeStyles,i),this.showing=!0,this._triggeringElement=e;var n=!0;this.everShown||(n=this._isPersistedCookieSet()),this.everShown=n,this._deploy.persistDeployment&&this.getDeploymentId()&&this._setPersistenceCookie();n=this._getSurveyEntryData();return n.surveyId=this._deploy.surveyId,n.installationId=this._deploy.installationId,n.deploymentId=this.getDeploymentId(),n.rootDeploymentId=this._rootDeploymentId,this._rpc.onShown(n),this.everShown||m.postToUrl(f.Main.eDRUrlBase+"log.php?e=layershow",this._deploy,f.PageState.documentDomainExplicitlySet),f.EventHub.raise(f.EventHub.LAYER_SHOWN,{layer:this,firstShow:!this.everShown,firstShowOnPage:!this.everShownOnPage}),this.everShown=this.everShownOnPage=!0},f.Layer.prototype._removePersistenceCookie=function(e){e=f.Main.COOKIE_FORCED_CONFIG_PREFIX+e;m.readCookie(e)&&m.eraseCookie(e,f.Main.DOMAIN)},f.Layer.prototype._setPersistenceCookie=function(){var e,t,i=this.getDeploymentId();i?(e=f.Main.COOKIE_FORCED_CONFIG_PREFIX+i,t=this._deploy.persistDeploymentDuration,m.readCookie(e)||((i=!1)!==t&&(i=(t=0===t?63072e3:t)/86400),t=JSON.stringify({rdi:this._rootDeploymentId||1,rl:this._rootLanguage||""}),m.createCookie(e,t,i,f.Main.DOMAIN),f.Tester.log(39,this.logId,[this.getDeploymentId(),t]))):f.Tester.log(41,this.logId)},f.Layer.prototype.getDeploymentId=function(){return this._deploymentId},f.Layer.prototype.hide=function(){var e;this._hiding||(f.Tester.log(9,this.logId),this._hiding=!0,this.hideLightbox(),this._rpc.hide(),g.setTimeout(function(){e._hiding&&(f.Tester.log(13,e.logId,[e.MAX_HIDE_TIME],4),e.forceHide())},(e=this).MAX_HIDE_TIME))},f.Layer.prototype.forceHide=function(e){if(this._hiding=!1,this.showing){if(f.Tester.log(10,this.logId),!e)for(var t=0;t<this._triggers.length;++t)this._triggers[t].setUntriggered();m.setStyleAttribute(this.div,this.HIDDEN_STYLE+"visibility:hidden;"),this.showing=!1,this._loggedCanShowEventDeniedShow=!1,this._triggeringElement=!1,this._initialFocusHandled=!1,this._positioner&&(this._positioner.destroy(),this._positioner=null),this._rpc.onHidden(),f.EventHub.raise(f.EventHub.LAYER_HIDDEN,{layer:this})}},f.Layer.prototype.focusFirst=function(){this._rpc.focusFirst()},f.Layer.prototype._setMetrics=function(e,t){this._positioner&&(this._positioner.setMetrics(e,t),this._handleInitialFocus())},f.Layer.prototype._handleInitialFocus=function(){this._positioner&&this._lightboxElement&&!this._initialFocusHandled&&(this._initialFocusHandled=!0,this._positioner.focusFirstClickCapturer())},f.Layer.prototype.destroy=function(e){f.Tester.log(11,this.logId),this._runDePersist(),u(this._ticker),this._configureTimeoutTimer&&u(this._configureTimeoutTimer),this._iframeCheckTimeoutTimer&&u(this._iframeCheckTimeoutTimer),this._positioner&&this._positioner.destroy(),this.iframe&&this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this._styleBlock&&this._styleBlock.parentNode&&this._styleBlock.parentNode.removeChild(this._styleBlock),this.div&&this.div.parentNode&&this.div.parentNode.removeChild(this.div),this._lightboxElement&&this._destroyLightbox(),this._ticker=null,this._configureTimeoutTimer=null,this._iframeCheckTimeoutTimer=null,this._positioner=null,this.iframe=null,this.div=null,this._styleBlock=null,this._rpc=null,this._lightboxElement=null,f.Main.onLayerDestroyed(this.id),f.EventHub.raise(f.EventHub.LAYER_DESTROYED,{layerName:this.getName()}),void 0!==e&&f.EventHub.raise(f.EventHub.LAYER_INTERACTED,{layer:this,action:e})},f.Layer.prototype._runDePersist=function(){var e,t;this._deploy.depersistDeploymentId&&(e=this._deploy.depersistDeploymentId,this._deploy.depersistDeploymentId=null,(t=f.Main.getLayerByDeploymentId(e))&&t.destroy(),this._removePersistenceCookie(e),f.Tester.log(40,this.logId,e))},f.Layer.prototype.execute=function(){if(this._deploy){switch(f.EventHub.raise(f.EventHub.LAYER_EXECUTED,{layer:this,action:this._deploy.type}),f.EventHub.raise(f.EventHub.LAYER_INTERACTED,{layer:this,action:"executed"}),this._runDePersist(),this._deploy.type){case"triggerOtherLayer":var e=f.Main.getLayerByName(this._deploy.otherLayerName);e&&e.trigger(this.div);break;case"deployOtherDeployment":var t=f.Main.getLayerById(this._deploy.onExecuteDeploymentId);t?(f.Tester.log(38,this.logId,this._deploy.onExecuteDeploymentId),t.trigger(this.div)):(f.Tester.log(36,this.logId,this._deploy.onExecuteDeploymentId),e=this._deploy.rootDeploymentId||this._rootDeploymentId||this._deploy.deploymentId,t=this._deploy.rootLanguage||this._rootLanguage,f.Main.deployDeployment(this._deploy.onExecuteDeploymentId,e,t));break;case"popupSurvey":this._deployPopupSurvey(this._deploy);break;case"exitSurvey":this._deployExitSurvey(this._deploy)}this._deploy.keepLayerOnExecute?f.Tester.log(37,this.logId):this.destroy()}else this.destroy()},f.Layer.prototype._deployPopupSurvey=function(e,t){var i=m.genGuid(),o=f.Main.eDRUrlBase+"deploy/"+(t?"enter-exit-survey-no-holding":"enter")+"/guid/"+i+"/installation/"+e.installationId,n=this._surveyWin,r=this._deploy.windowSize,s=m.executesInactiveTabs(),a=this._getSurveyEntryData();a.surveyId=e.surveyId,a.installationId=e.installationId,a.deploymentId=e.deploymentId,a.rootDeploymentId=this._rootDeploymentId,m.postToUrl(f.Main.eDRUrlBase+"prepare.php?guid="+i,a,f.PageState.documentDomainExplicitlySet,s?function(){n.location=o}:void 0),t?(this._surveyWin=n=t,r.x&&r.y&&(n.resizeTo?n.resizeTo(r.x,r.y):(n.outerWidth=r.x,n.outerHeight=r.y))):this._surveyWin=n=this._openWindow(s?"about:blank":o,"edr_win_"+this.name,r.x,r.y)},f.Layer.prototype._configureJSBehaviour=function(){switch(this._layout.jsBehaviour){case 0:break;case 1:this._configureFloatingLayerBehaviour()}},f.Layer.prototype._createLightbox=function(){var e=y.createElement("div");e.className="edr_lb",y.getElementById("edr_survey").appendChild(e),this._lightboxElement=e},f.Layer.prototype._destroyLightbox=function(){this._lightboxAnimationStepper&&(a(this._lightboxAnimationStepper),this._lightboxAnimationStepper=null),f.Main.flagLightboxHidden(this.id),this._lightboxElement&&this._lightboxElement.parentNode&&this._lightboxElement.parentNode.removeChild(this._lightboxElement),this._lightboxElement=null},f.Layer.prototype._configureFloatingLayerBehaviour=function(){f.Tester.log(35,this.logId)},f.Layer.prototype._deployExitSurvey=function(i){f.Tester.log(26,this.logId);var o=this._getSurveyEntryData();o.surveyId=i.surveyId,o.installationId=i.installationId,o.deploymentId=i.deploymentId,o.rootDeploymentId=this._rootDeploymentId;var n,e=f.PageState.documentDomainExplicitlySet&&m.isIEOrEdge(),t=this._deploy.holdingWindowSize,r=!1,s=m.getVisibilityChangeEventNames();eventWriteFn=function(e){(e=e||g.event).type===s.visibilitychange&&(g.document.removeEventListener(s.visibilitychange,eventWriteFn),r||u(d._surveyWin))},s.hidden in g.document&&g.document.addEventListener(s.visibilitychange,eventWriteFn),this._surveyWin=this._openWindow(e?f.Main.holdingWindowAccessDocument:"about:blank","_blank",t.x,t.y);try{n=this._surveyWin.document}catch(e){n=null}var a=0,l=2e3,h=20,d=this;function u(t){if(++a>l/h)r||(t.close(),t=null,f.Tester.log(24,d.logId,null,3));else{try{if(!t.document||r&&n===t.document)throw"wait"}catch(e){return void c(function(){u(t)},h)}if(t.document.getElementById){f.Tester.log(27,d.logId),r=!0;try{var e=t.document.getElementsByTagName("body");e&&(e[0].innerHTML="")}catch(e){}e=f.Main.eDRUrlBase+"deploy/holding/deployment/"+i.deploymentId;d._rootDeploymentId&&(e+="/rdi/"+d._rootDeploymentId),e+="/survey/"+p(i.surveyId),e+="/installation/"+p(i.installationId),f.PageState.documentDomainExplicitlySet&&(e+="/doc-domain/"+p(y.domain)),o.locale&&(e+="/locale/"+p(o.locale)),n=t.document,t.document.write('<!DOCTYPE html><SCRIPT LANGUAGE="Javascript">'+(f.PageState.documentDomainExplicitlySet?'document.domain = "'+y.domain+'";':"")+"var pc = "+JSON.stringify(d._probeConfiguration)+";var ppv = "+JSON.stringify(f.Main.pushedProbeValues)+";var sed = "+JSON.stringify(o)+";var dply = "+JSON.stringify(i)+";<\/SCRIPT>"),t.document.write('<SCRIPT LANGUAGE="Javascript" ASYNC SRC="'+e+'"><\/SCRIPT>'),m.isIOS()&&c(function(){u(t)},h)}else f.Tester.log(25,d.logId,null,3),d._deployPopupSurvey(i,t)}}c(function(){c(function(){u(d._surveyWin)},0)},0)},f.Layer.prototype._getSurveyEntryData=function(){var e=i.execute(g,i.createFromConfig(this._probeConfiguration),f.Main.pushedProbeValues),t=f._getId();return{url:g.location.href,probes:e,locale:f.Main.LOCALE,data1:f.Main.DATA1,data2:f.Main.DATA2,data3:f.Main.DATA3,test:f.Main.TEST,uuid:null!==t?t:""}},f.Layer.prototype._openWindow=function(e,t,i,o){var n=m.isIOS()||m.isAndroid(),r=n?null:"location=0,toolbar=no,directories=no,status=no,scrollbars=yes,resizable=yes";return!n&&i&&o&&(r+=",width="+i+",height="+o),g.open(e,t,r)},f.Deployment=function(e){this._config=e},f.Deployment.prototype.getSurveyId=function(){return this._config.surveyId},f.Deployment.prototype.getInstallationId=function(){return this._config.installationId},f.Deployment.prototype.getLayerId=function(){return this._config.humanIds.layerId},f.Deployment.prototype.getDeploymentId=function(){return this._config.humanIds.deploymentId},f.Deployment.prototype.getDeployId=function(){return this._config.humanIds.deployId},f.Deployment.prototype.getTriggerId=function(){return this._config.humanIds.triggerpointId},f.Deployment.prototype.getType=function(){return this._config.type},f.Trigger=function(e){this._config=e,this._triggeringElement=null,this._triggeringElementChanged=!1,this._conditions=[];var t=e.conditionals;if(t)for(var i=0;i<t.length;++i)this._conditions.push(f.Conditional.create(t[i]))},f.Trigger.create=function(e){switch(e.type){case"init":return new f.TriggerInit(e);case"click":return new f.TriggerClick(e);case"scroll":return new f.TriggerScroll(e);default:f.Tester.log(16,null,[e.type],2)}},f.Trigger.prototype.evaluate=function(e,t){},f.Trigger.prototype.onEvent=function(e,t,i){},f.Trigger.prototype._doConditionsPass=function(e){for(var t=0;t<this._conditions.length;++t)if(!this._conditions[t].isTrue(e))return!1;return!0},f.Trigger.prototype.setTriggered=function(e){var t=e||g;t!==this._triggeringElement&&(f.Tester.log(14,this._config.type,e),this._triggeringElementChanged=!0,this._triggeringElement=t)},f.Trigger.prototype.setUntriggered=function(){this._triggeringElement&&(f.Tester.log(15,this._config.type),this._triggeringElementChanged=!0,this._triggeringElement=null)},f.Trigger.prototype.getTriggeringElement=function(){return this._triggeringElement},f.Trigger.prototype.checkTriggerChanged=function(){var e=this._triggeringElementChanged;return this._triggeringElementChanged=!1,e},f.TriggerManual=function(){f.Trigger.call(this,{type:"manual"})},m.inherits(f.TriggerManual,f.Trigger),f.TriggerInit=function(e){f.Trigger.call(this,e),this._disabled=!1},m.inherits(f.TriggerInit,f.Trigger),f.TriggerInit.prototype.evaluate=function(e,t){if(!t.everShownOnPage&&!this._disabled)return this._doConditionsPass()?void((!this._config.delay||e.getMillisecondsSincePageLoad()>parseInt(this._config.delay,10))&&this.setTriggered()):(f.Tester.log(17,this._config.type,null,4),void(this._disabled=!0))},f.TriggerClick=function(e){f.Trigger.call(this,e),this._triggering=!1},m.inherits(f.TriggerClick,f.Trigger),f.TriggerClick.prototype.onEvent=function(e,t,i){var o,n;"click"===e.type&&this._config.selector&&m.matchesSelector(e.target,this._config.selector)&&(this._triggeringElement&&e.target===this._triggeringElement?this.setUntriggered():this._triggering||(this._doConditionsPass(e.target)?(n=function(){o._triggering=!1,o.setTriggered(e.target)},(o=this)._config.delay&&!i.showing?(this._triggering=!0,c(n,this._config.delay)):n()):f.Tester.log(18,this._config.type,e.target,4)))},f.TriggerScroll=function(e){this._repeatable=!!e.repeatable,this._docScroll={update:function(){for(var e=["scrollTop","scrollLeft"],t=0;t<e.length;++t)y.body&&y.body[e[t]]?this[e[t]]=y.body[e[t]]:y.documentElement&&y.documentElement[e[t]]?this[e[t]]=y.documentElement[e[t]]:y.documentElement&&!y.documentElement[e[t]]&&(this[e[t]]=0)}},f.Trigger.call(this,e)},m.inherits(f.TriggerScroll,f.Trigger),f.TriggerScroll.prototype.evaluate=function(e,t){var i=this._config.element;if(i){var o=this._config.axes;if(o){function n(e,t,i){var o=parseInt(i,10);return o=-1!==i.indexOf("%")?("y"===t?e.offsetHeight:e.offsetWidth)*(o/100):o}var r={x:"scrollLeft",y:"scrollTop"},s=!1,a=[],l=null;"document"===i?(this._docScroll.update(),a=[this._docScroll],l=g.document.body):a=y.querySelectorAll(i);for(var h,d,u=0;u<a.length;++u)for(var c in r)r.hasOwnProperty(c)&&o[c]&&(h=o[c].lowerBound,d=o[c].upperBound,h=null==h||a[u][r[c]]>=n(l||a[u],c,h),d=null==d||a[u][r[c]]<=n(l||a[u],c,d),h&&d&&(!this._repeatable&&t.everShownOnPage||this.setTriggered("document"===i?g.document.body:a[u]),s=!0));s||this.setUntriggered()}}},f.Conditional=function(e){this._matchMode=e.matchMode,this._negate=!0===e.not,this._value=e.value},f.Conditional.create=function(e){switch(e.type){case"cookie":return new f.ConditionalCookie(e);case"element":return new f.ConditionalElement(e);case"triggerElement":return new f.ConditionalTriggerElement(e);default:f.Tester.log(19,null,[e.type],2)}},f.Conditional.prototype.isTrue=function(e){e=this._evaluate(e);return e=this._negate?!e:e},f.Conditional.prototype._evaluate=function(e){return!0},f.ConditionalCookie=function(e){f.Conditional.call(this,e)},m.inherits(f.ConditionalCookie,f.Conditional),f.ConditionalCookie.prototype._evaluate=function(e){return null!==m.readCookie(this._value)},f.ConditionalElement=function(e){f.Conditional.call(this,e)},m.inherits(f.ConditionalElement,f.Conditional),f.ConditionalElement.prototype._evaluate=function(e){var t=this._matchMode,i=y.querySelector(this._value);return i&&1===t?0!==i.offsetWidth:null!==i},f.ConditionalTriggerElement=function(e){f.Conditional.call(this,e)},m.inherits(f.ConditionalTriggerElement,f.Conditional),f.ConditionalTriggerElement.prototype._evaluate=function(e){return!!e&&m.matchesSelector(e,this._value)},f.PositionedLayer=function(e,t,i,o){this._layer=e,this._anchor=t,this._iframeStyles=i,this._offsetsAbsStyles={},this._offsetsPercentages={},this._offsets={},this._offsetsNegated={},this._offsetStyles={},this._currentLayerAnchorEdges=null,this._goClickCapturers={};var n,r,s,a=o.position.offset||{},l={x:0,y:0};for(n in l)l.hasOwnProperty(n)&&(r=-1!==(s=a[n]?"string"==typeof a[n]?a[n]:a[n].toString():"0").indexOf("%"),s=parseInt(s,10),this._offsets[n]=r?0:s,this._offsetsPercentages[n]=r?s:0,this._offsetsNegated[n]=s<0,this._offsetsAbsStyles[n]=Math.abs(s)+(r?"%;":"px;"),this._offsetStyles[n]=s+(r?"%;":"px;"));this._edges=o.position.edges,this._timeout=null,this._position()},f.PositionedLayer.prototype.isClickCapturer=function(e){var t,i=this._goClickCapturers;for(t in i)if(i.hasOwnProperty(t)&&e===i[t])return!0;return!1},f.PositionedLayer.prototype.focusFirstClickCapturer=function(){for(var e in this._goClickCapturers)if(this._goClickCapturers.hasOwnProperty(e)){this._goClickCapturers[e].focus();break}},f.PositionedLayer.prototype.setMetrics=function(e,t){this._positionWithSize(e),this._doGoClickCapturers(t)},f.PositionedLayer.prototype._position=function(){this._layer.requestCurrentMetrics(),this._again()},f.PositionedLayer.prototype._positionWithSize=function(e){if(this._anchor)if(0!==this._anchor.offsetWidth){var t="";switch(this._iframeStyles.width&&"100%"!=this._iframeStyles.width||(t+="width:"+e.x+"px;"),this._iframeStyles.height||(t+="height:"+e.y+"px;"),this._anchor){case g:case g.document:t+=this._positionToWindow(e);break;default:this._edges?t+=this._positionByEdges(e,this._edges,this._offsetStyles):t+=this._positionAutomatically(e)}m.setStyleAttribute(this._layer.div,t)}else this._layer.forceHide()},f.PositionedLayer.prototype._positionToWindow=function(e){function t(e){return!!o&&-1!==m.arrayIndexOf(o,e)}var i,o=this._edges,n=m.getViewportSize(),r="position:"+(this._anchor===g&&e.y<n.y?"fixed":"absolute")+";";return t("left")===t("right")?(i=this._offsets.x-Math.min(n.x/2,e.x/2),r+="right:auto;left:"+(this._offsetsPercentages.x+50)+"%;margin-left:"+i+"px;"):t("left")?r+="right:auto;left:"+this._offsetStyles.x:t("right")&&(r+="left:auto;right:"+(this._offsetsNegated.x?"":"-")+this._offsetsAbsStyles.x),t("top")===t("bottom")?(e=this._offsets.y-Math.min(n.y/2,e.y/2),r+="bottom:auto;top:"+(this._offsetsPercentages.y+50)+"%;margin-top:"+e+"px;"):t("top")?r+="bottom:auto;top:"+this._offsetStyles.y:t("bottom")&&(r+="top:auto;bottom:"+(this._offsetsNegated.y?"":"-")+this._offsetsAbsStyles.y),this._layerSetAnchorEdges([]),r},f.PositionedLayer.prototype._again=function(){u(this._timeout);var e=this;this._timeout=c(function(){e._position()},1e3)},f.PositionedLayer.prototype._positionAutomatically=function(e){var t=m.findFixedPos(this._anchor),i=this._anchor.offsetWidth,o=this._anchor.offsetHeight,n=m.getViewportSize(),r=t.x,i=n.x-(t.x+i),o=n.y-(t.y+o),t=t.y,i=r>e.x||i>e.x?i<r?"left":"right":o<t?"top":"bottom",r={top:"bottom",right:"left",bottom:"top",left:"right"}[i],o=function(e){return 0<e.length&&"-"==e[0]?e.substring(1):"-"+e},t=this._offsetStyles,t={x:"right"===i?t.x:"left"===i?o(t.x):0,y:"top"===i?t.y:"bottom"===i?o(t.y):0};return this._positionByEdges(e,{anchor:[i],layer:[r]},t)},f.PositionedLayer.prototype._positionByEdges=function(e,t,i){var o=function(e,t,i){function o(e){return!!t&&-1!==m.arrayIndexOf(t,e)}e={x:(i=i||{x:e.clientWidth,y:e.clientHeight}).x/2,y:i.y/2};return o("top")&&(e.y=0),o("bottom")&&(e.y=i.y),o("left")&&(e.x=0),o("right")&&(e.x=i.x),e},n=m.findFixedPos(this._anchor),r=o(this._anchor,t.anchor),s=o(this._layer.div,t.layer,e),o=n.x+r.x,r=n.y+r.y,o={x:o-s.x,y:r-s.y},r=m.getViewportSize(),s=function(e,t,i){return e<t?t:i<e?i:e};o.x=s(o.x,0,r.x-e.x),o.y=s(o.y,0,r.y-e.y);i="position:fixed;left:"+o.x+"px;top:"+o.y+"px;margin-left:"+i.x+"margin-top:"+i.y;return this._layerSetAnchorEdges(t.layer),i},f.PositionedLayer.prototype._layerSetAnchorEdges=function(e){var t=null===this._currentLayerAnchorEdges||this._currentLayerAnchorEdges.length!==e.length;if(!t)for(var i=0;i<e.length;++i)if(-1==m.arrayIndexOf(this._currentLayerAnchorEdges,e[i])){t=!0;break}t&&(this._currentLayerAnchorEdges=e,this._layer.onAnchorEdgesChanged(e))},f.PositionedLayer.prototype._doGoClickCapturers=function(e){for(var t in e){var i,o,n;e.hasOwnProperty(t)&&(i=e[t],(o=y.getElementById(t))||(n="",delete this._goClickCapturers[t],(o=y.createElement("a")).id=t,o.href="javascript:void(0)",o.className=f.Main.GO_CLICK_CAPTURER_CLASS,i.title&&(o.title=i.title,n=" - "+i.title),i.text&&(void 0!==o.textContent?o.textContent=i.text+n:o.innerText=i.text+n),this._layer.div.insertBefore(o,this._layer.div.firstChild),this._goClickCapturers[t]=o),m.setStyleAttribute(o,"top:"+i.top+"px;left:"+i.left+"px;width:"+i.width+"px;height:"+i.height+"px;"))}},f.PositionedLayer.prototype.destroy=function(){for(var e in u(this._timeout),this._timeout=null,this._anchor=null,this._layer=null,this._goClickCapturers)!this._goClickCapturers.hasOwnProperty(e)||(e=y.getElementById(e))&&e.parentNode&&e.parentNode.removeChild(e);this._goClickCapturers={}},f._generateAndSetId=function(e){var t=m.genGuid();return f.setId(t,e),t},f.getId=function(e){var t=f._getId();return e=void 0===e?EDRSurvey.TRACKING_DAYS:e,t=null===t&&e!=f.TRACKING_DAYS_DISABLED?f._generateAndSetId(e):t},f.setId=function(e,t){if(void 0===t||isNaN(t))throw"Days not defined";if(t<0)throw"Days smaller than 0";m.createCookie(f.TRACKING_COOKIE_NAME,e,t,f.Main.DOMAIN),f.EventHub.raise(f.EventHub.TRACKING_ID_SET,e)},f._getId=function(){return m.readCookie(f.TRACKING_COOKIE_NAME)},f.Tester={MAX_ITEMS_WHEN_NOT_IN_TEST_MODE:100,receivedStrings:!1,_testPanel:null,_logPanel:null,_messageStrings:{},_logItems:[],activate:function(e){e&&(this._messageStrings=e,this.receivedStrings=!0),this._testPanel||((e=y.createElement("style")).type="text/css",m.setStyleBlock(e,"#edr_test {font-size:12px;text-align:left;font-family:monospace;position:fixed;bottom:0;left:0;right:0;height:15%;z-index:"+f.Main.ZINDEX_ON_TOP+";background-color:#fff;border-top:1px solid silver;overflow:auto;color:black;}#edr_test ul, #edr_debug_panel li {padding:0;margin:0;list-style-type:none;}#edr_test li span {margin-right:1em;}#edr_test li span.id {font-weight:bold; min-width: 10em;display:inline-block;}#edr_test li.t_3 {color:red;}#edr_test li.t_4 {color:goldenrod;}#edr_test li.s_lcl {background-color:#E9E9FF;}#edr_test li.s_prv {background-color:#FFF7E6;}#edr_test li.s_svr {background-color:#F7E6FF;}#edr_test li.t_2 {color:white;background-color:red;}."+f.Main.GO_CLICK_CAPTURER_CLASS+" {opacity:0.5;display:block;filter: alpha(opacity = 50);background-color:white;outline:1px solid fuchsia;}"),y.getElementsByTagName("head")[0].appendChild(e),(e=this._testPanel=y.createElement("div")).id="edr_test",f.Main._domContainer.appendChild(e),this._logPanel=y.createElement("ul"),e.appendChild(this._logPanel)),this._refresh()},isActive:function(){return null!==this._testPanel},_refresh:function(){for(;1<=this._logPanel.childNodes.length;)this._logPanel.removeChild(this._logPanel.firstChild);for(var e=0;e<this._logItems.length;++e)this._logItem(this._logItems[e])},_logItem:function(e){function t(e){return null===e?"null":void 0===e?"undefined":e.nodeName?"Node: "+e.nodeName:e.toString()}var i,o,n,r=y.createElement("li"),s={};switch(e.src){case 0:s.src="lcl";break;case 1:s.src="svr";break;case 2:s.src="prv"}if(r.className="t_"+e.type+" s_"+s.src,s.dt=e.dt.toLocaleTimeString(),e.id&&(s.id=e.id),e.msg)s.msg=e.msg;else{var a=e.p instanceof Array?e.p:[e.p],l=this._messageStrings[e.c];if(l){for(i=0;i<a.length;++i)l=l.replace("{"+i+"}",t(a[i]));s.msg=l}else for(s.code=e.c,i=0;i<a.length;++i)s["par_"+i]=t(a[i])}for(o in s)s.hasOwnProperty(o)&&((n=y.createElement("span")).className=o,n.innerText=n.textContent=s[o],r.appendChild(n));this._logPanel.insertBefore(r,this._logPanel.firstChild)},log:function(e,t,i,o){void 0===o&&(o=6),this._rawLogItem({dt:new Date,src:0,type:o,id:t,c:e,p:i})},providerLog:function(e,t,i){void 0===i&&(i=6),this._rawLogItem({dt:new Date,src:2,type:i,id:e,msg:t})},serverLog:function(e,t){this._rawLogItem({dt:new Date(1e3*t.dt),src:1,type:t.type,id:e,msg:t.msg})},_rawLogItem:function(e){this._logItems.push(e),this._logPanel?this._logItem(e):this._logItems.length>this.MAX_ITEMS_WHEN_NOT_IN_TEST_MODE&&this._logItems.pop()}},f.EventHub={BEFORE_INITIALISED:"beforeInitialised",INITIALISED:"initialised",LAYER_INITIALISED:"layerInitialised",LAYER_CAN_SHOW:"layerCanShow",LAYER_WONT_SHOW:"layerWontShow",LAYER_SHOWN:"layerShown",LAYER_HIDDEN:"layerHidden",LAYER_DESTROYED:"layerDestroyed",LAYER_EXECUTED:"layerExecuted",LAYER_INTERACTED:"layerInteracted",TRACKING_ID_SET:"trackingIdSet",_handlers:[],attach:function(e,t){return"function"==typeof t&&(-1===this._find(e,t)&&(this._handlers.push({e:e,h:t}),!0))},detach:function(e,t){e=this._find(e,t);if(-1===e)return!1;t=this._handlers.slice(e+1||this._handlers.length);return this._handlers.length=e<0?this._handlers.length+e:e,this._handlers.push.apply(this._handlers,t),!0},raise:function(e,t){for(var i=0;i<this._handlers.length;++i){var o=this._handlers[i];if(o.e===e)try{o.h.call(n,t||null)}catch(e){}}},_find:function(e,t){for(var i=0;i<this._handlers.length;++i){var o=this._handlers[i];if(o.e===e&&o.h===t)return i}return-1}},f.Main={REMOTE_HOST:null,REMOTE_PATH:null,ID:null,LOCALE:null,DATA1:null,DATA2:null,DATA3:null,TEST:!1,VERSION:null,PROPORTION:null,DOMAIN:"",ZINDEX_ON_TOP:999999,GO_CLICK_CAPTURER_CLASS:"edr_go",LAYER_IFRAME_CLASS:"edr_layer",COOKIE_FORCED_CONFIG_PREFIX:"eds_fcfg_",eDRUrlBase:null,layers:{},holdingWindowAccessDocument:g.location,pushedProbeValues:{},_domContainer:null,_cookiesEnabled:!1,_flashVersion:null,_platformSupported:null,_initialised:!1,_savedElementTabIndices:[],_layersWithLightboxes:[],main:function(){f.Tester.log(1);var e=y.domain;this.DOMAIN?-1===e.indexOf(this.DOMAIN,e.length-this.DOMAIN.length)&&(f.Tester.log(29,null,this.DOMAIN,3),this.DOMAIN=e):this.DOMAIN=e,f.Tester.log(28,null,this.DOMAIN),this._tick();var t=this;s(function(){t._tick()},500),this._waitForReady(1)},_waitForReady:function(e){f.Tester.log(2,null,e);var t=this;/in/.test(y.readyState)?c(function(){t._waitForReady(e+1)},9):this._checkBeforeInitialised(1)},_checkBeforeInitialised:function(e){var t,i={wait:!1,abort:!1};f.EventHub.raise(f.EventHub.BEFORE_INITIALISED,i),i.abort||(i.wait?(t=this,f.Tester.log(30,null,e),c(function(){t._checkBeforeInitialised(e+1)},100+500*(e-1))):this._start())},_start:function(){f.Tester.log(3);var e=g.ecos_sid,t=g.ecos_vault;e&&t&&f.Tester.log(32,null,"ESV-"+("_"!==t?t+"-":"")+e,4),f.PageState.init(),this._cookiesEnabled=m.areCookiesEnabled(),this._flashVersion=m.getFlashVersion(),this._platformSupported=this._testIfPlatformSupported(this._cookiesEnabled,this._flashVersion),f.Tester.log(4,null,[this._cookiesEnabled,this._flashVersion,this._platformSupported],this._platformSupported?6:2),this.eDRUrlBase=("https:"===y.location.protocol?"https://":"http://")+this.REMOTE_HOST+this.REMOTE_PATH;t=y.getElementsByTagName("head")[0],e=y.createElement("style");e.type="text/css",t.appendChild(e),m.setStyleBlock(e,"#edr_survey .edr_lwrap iframe {width:100%;height:100%;}#edr_survey ."+this.GO_CLICK_CAPTURER_CLASS+" {opacity:0;display:block;filter:alpha(opacity = 0);position:absolute;font-size:0;background-color:#000;margin:0;padding:0;visibility:visible;z-index:"+(this.ZINDEX_ON_TOP+1)+";}#edr_survey .edr_lb {position:fixed;top:0;left:0;right:0;bottom:0;z-index:"+(this.ZINDEX_ON_TOP-1)+";display:none;}");e=this._domContainer=y.createElement("div");e.id="edr_survey",y.body.insertBefore(e,y.body.firstChild),this.TEST&&f.Tester.activate(),this._attachDocumentEvents(y),f.EventHub.raise(f.EventHub.INITIALISED,{supportedPlatform:this._platformSupported}),this._initialised=!0,Math.random()<this.PROPORTION?this.deployDeployment():f.Tester.log(44,this.logId,[this.PROPORTION])},_tick:function(){m.createCookie("ecos.dt",+new Date,null,this.DOMAIN)},_attachDocumentEvents:function(e){var i=this;m.addEvents(e,["click","mouseover","mouseout","keyup"],function(e){for(var t in i.layers)i.layers.hasOwnProperty(t)&&i.layers[t].onEvent(e)}),m.addEvents(e,["focus","blur"],function(e){for(var t in i.layers)i.layers.hasOwnProperty(t)&&i.layers[t].onEvent(e)},!0)},onLayerInitialised:function(e,t){this.layers[e]=t},onLayerDestroyed:function(e){delete this.layers[e]},deployLayer:function(e){f.Tester.log(36,this.logId);e="l:"+e;return this.layers[e]||new f.Layer(e)},deployDeployment:function(e,t,i){var o,n=this.layers[e];return n||(o=m.readCookie(f.Main.COOKIE_FORCED_CONFIG_PREFIX+e),e&&!t&&o&&"1"!==o.rdi&&(t=o.rdi),e&&!i&&o&&""!==o.rl&&(i=o.rl),n=new f.Layer(e,t,i)),n},redeploy:function(){if(!this._initialised)return null;var e=this.layers.null;return e&&e.destroy(),Math.random()<this.PROPORTION?this.deployDeployment():(f.Tester.log(44,this.logId,[this.PROPORTION]),null)},getLayerByName:function(e){for(var t in this.layers)if(this.layers.hasOwnProperty(t)&&this.layers[t].name===e)return this.layers[t];return null},getLayerByDeploymentId:function(e){for(var t in this.layers)if(this.layers.hasOwnProperty(t)&&this.layers[t].getDeploymentId()==e)return this.layers[t];return null},getLayerById:function(e){return this.layers[e]||null},buildUrl:function(e,t){var i=this.eDRUrlBase+e+".php?id="+this.ID;this._platformSupported||(i+="&s=0"),f.Tester.isActive()&&(i=i+"&t="+(f.Tester.receivedStrings?2:1)),i+="&v="+this.VERSION;for(var o="",n=g.location.href,r=0,s=0;s<n.length;s++)"/"===n.charAt(s)&&r++,3<=r&&(o+=n.charAt(s));0<this.LOCALE.length&&(i+="&l="+p(this.LOCALE)),0<this.DATA1.length&&(i+="&d1="+p(this.DATA1)),0<this.DATA2.length&&(i+="&d2="+p(this.DATA2)),0<this.DATA3.length&&(i+="&d3="+p(this.DATA3)),0<screen.width&&0<screen.height&&(i+="&x="+screen.width+"&y="+screen.height),0<screen.colorDepth&&(i+="&d="+screen.colorDepth),this._cookiesEnabled&&(i+="&c="+p(m.readCookie(EDRSurvey.COOKIE_NAME,"."))),i+="&ck="+(this._cookiesEnabled?"1":"0"),null!==this._flashVersion&&(i+="&fl="+p(this._flashVersion)),this.PROPORTION<1&&(i+="&pr="+this.PROPORTION),i+="&p="+p(o.substring(0,100)),y.referrer&&(i+="&ref="+p(y.referrer.substring(0,100))),0<=_.indexOf("Safari")&&(i+="&fu="+p(g.location.href));var a,l,h=f.Main.COOKIE_FORCED_CONFIG_PREFIX,d=m.readCookiesWithPrefix(h),u=[],c=[];for(a in d)if(d.hasOwnProperty(a))try{c.push(JSON.parse(d[a])),u.push(a.substr(h.length))}catch(e){}for(l in 0<u.length&&(i+="&fd="+p(u.join())),0<c.length&&"1"!==c[0].rdi&&(i+="&rdi="+p(c[0].rdi)),0<c.length&&""!==c[0].rl&&!t.rlang&&(i+="&rlang="+p(c[0].rl)),t)t.hasOwnProperty(l)&&(i+="&"+l+"="+p(t[l]));return i},_testIfPlatformSupported:function(e,t){if(!e)return!1;e=function(e){return null!=e};return!(!e(y.querySelector)||!e(y.querySelectorAll))&&("classList"in y.createElement("_")&&(!!e(g.postMessage)&&e(g.eDRXDMClient)))},getLayers:function(){var e,t=[];for(e in this.layers)this.layers.hasOwnProperty(e)&&t.push(this.layers[e]);return t},getTester:function(){return f.Tester},setProbeValues:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setProbeValue(t,e[t])},setProbeValue:function(e,t){if(!t.substring&&!t.toFixed&&!0!==t&&!1!==t)throw"Invalid probe value for key: "+e;this.pushedProbeValues[e]=t.substring?t.toString():t},getProbeValue:function(e){return this.pushedProbeValues[e]},getProbeValues:function(){return this.pushedProbeValues},setDomainAccessDocumentPath:function(e){if(!e.substring)throw"Path must be a string";this.holdingWindowAccessDocument=e},flagLightboxDisplayed:function(e){-1===m.arrayIndexOf(this._layersWithLightboxes,e)&&this._layersWithLightboxes.push(e),this._layersWithLightboxes.length&&this._constrainFocus()},flagLightboxHidden:function(e){e=m.arrayIndexOf(this._layersWithLightboxes,e);-1!==e&&this._layersWithLightboxes.splice(e,1),this._layersWithLightboxes.length||this._unconstrainFocus()},_constrainFocus:function(){for(var e=y.querySelectorAll("a, button, input, select, [tabindex], iframe"),t=0;t<e.length;++t){var i=e[t].className?e[t].className.split(" "):[];e[t].getAttribute&&e[t].setAttribute&&-1===m.arrayIndexOf(i,f.Main.GO_CLICK_CAPTURER_CLASS)&&-1===m.arrayIndexOf(i,f.Main.LAYER_IFRAME_CLASS)&&(this._savedElementTabIndices.push({e:e[t],ti:e[t].getAttribute("tabindex")}),e[t].setAttribute("tabindex",-1))}},_unconstrainFocus:function(){for(var e=0;e<this._savedElementTabIndices.length;++e){var t=this._savedElementTabIndices[e];null!==t.ti?t.e.setAttribute("tabindex",t.ti):t.e.removeAttribute("tabindex")}this._savedElementTabIndices=[]}},f.EventHub.attach(f.EventHub.LAYER_SHOWN,function(e){null===f._getId()&&f.TRACKING_DAYS_DISABLED!==EDRSurvey.TRACKING_DAYS&&f._generateAndSetId(EDRSurvey.TRACKING_DAYS)}),n.EDRSurvey=f.Main,f.Main.main=f.Main.main,f.Main.setProbeValue=f.Main.setProbeValue,f.Main.setProbeValues=f.Main.setProbeValues,f.Main.getProbeValue=f.Main.getProbeValue,f.Main.getProbeValues=f.Main.getProbeValues,f.Main.setDomainAccessDocumentPath=f.Main.setDomainAccessDocumentPath,f.Main.deployLayer=f.Main.deployLayer,f.Main.getLayers=f.Main.getLayers,f.Main.getTester=f.Main.getTester,f.Main.redeploy=f.Main.redeploy,f.Main.Events=f.EventHub,f.Main.Events.attach=f.EventHub.attach,f.Main.Events.detach=f.EventHub.detach,f.Layer.prototype.getDeploymentId=f.Layer.prototype.getDeploymentId,f.Layer.prototype.getName=f.Layer.prototype.getName,f.Layer.prototype.hide=f.Layer.prototype.hide,f.Layer.prototype.trigger=f.Layer.prototype.trigger,f.Layer.prototype.destroy=f.Layer.prototype.destroy,f.Layer.prototype.showLightbox=f.Layer.prototype.showLightbox,f.Layer.prototype.hideLightbox=f.Layer.prototype.hideLightbox,f.Layer.prototype.getDeployment=f.Layer.prototype.getDeployment,f.Deployment.prototype.getSurveyId=f.Deployment.prototype.getSurveyId,f.Deployment.prototype.getInstallationId=f.Deployment.prototype.getInstallationId,f.Deployment.prototype.getLayerId=f.Deployment.prototype.getLayerId,f.Deployment.prototype.getDeploymentId=f.Deployment.prototype.getDeploymentId,f.Deployment.prototype.getDeployId=f.Deployment.prototype.getDeployId,f.Deployment.prototype.getTriggerId=f.Deployment.prototype.getTriggerId,f.Deployment.prototype.getType=f.Deployment.prototype.getType,f.Main.getId=f.getId,EDRSurvey.REMOTE_HOST="edigitalsurvey.com",EDRSurvey.REMOTE_PATH="/",EDRSurvey.COOKIE_NAME="ckns_eds",EDRSurvey.ID="INS-642345567",EDRSurvey.LOCALE="",EDRSurvey.DATA1="",EDRSurvey.DATA2="",EDRSurvey.DATA3="",EDRSurvey.TEST=!1,EDRSurvey.VERSION="7291",EDRSurvey.PROPORTION=.25,EDRSurvey.DOMAIN="",EDRSurvey.TRACKING_DAYS=-1,EDRSurvey.main()):n.EDRSurvey.getTester().log(33,null,null,4)}(window,document,(location,window.setTimeout),window.clearTimeout,window.setInterval,window.clearInterval,(decodeURIComponent,encodeURIComponent),navigator.userAgent),require(function(){EDRSurvey.bbc={hasTaken:null},EDRSurvey.Events.attach("layerShown",function(e){EDRSurvey.bbc.hasTaken=!1})});