var dependencies=["orb/features/_skiplinks","orb/features/masthead/_layoutprimarynav","orb/features/_drawerManager"];function removeElement(e,t){return e.filter(function(e){return e!==t})}window.bbcpage.isModal().then(function(e){e&&(dependencies=removeElement(dependencies,"orb/features/masthead/_layoutprimarynav"),dependencies=removeElement(dependencies,"orb/features/_drawerManager")),require(dependencies,function(){"use strict";for(var e=0,t=arguments.length;e<t;e++)arguments[e]()})}),define("orb/lib/_event",function(){"use strict";var o={};return document.addEventListener?o.addEvent=function(e,t,n){if(e&&(e.nodeName||e===window))e.addEventListener(t,n,!1);else if(e&&e.length)for(var r=0,i=e.length;r<i;r++)o.addEvent(e[r],t,n)}:o.addEvent=function(t,e,n){if(t&&(t.nodeName||t===window))t.attachEvent("on"+e,function(e){return(e=e||window.event||{}).srcElement&&void 0===e.target&&(e.target=e.srcElement),n.call(t,e)});else if(t&&t.length)for(var r=0,i=t.length;r<i;r++)o.addEvent(t[r],e,n)},o.mixin=function(t){t.__events={},t.event=function(e){var r=void 0!==t.__events[e]?t.__events[e]:t.__events[e]=[];return{add:function(e){r.push(e)},fire:function(e){e=e||{};for(var t=0,n=r.length;t<n;t++)r[t](e)}}}},o}),define("orb/features/masthead/_drawer",[],function(){"use strict";function e(e){this.content=e,this._currentPanel=null,this.panels={},this.panelName=null}return e.prototype.addPanel=function(e){return(this.panels[e.name]=e).drawer=this},e.prototype.getPanel=function(e){return e?this.panels[e]:this._currentPanel},e.prototype.resize=function(e){this._currentPanel&&this._currentPanel.name===e&&(e=this.panels[e].content.offsetHeight+"px",document.getElementById("orb-panels").style.height=e)},e.prototype.showPanel=function(e){var t=this._currentPanel;null===t?(this.panelName=e,this.content.dispatchEvent(new CustomEvent("onActivate")),this._currentPanel=this.panels[e],this._currentPanel.publishState("shown")):t&&t.name===e?this.hidePanel():(this.deactivatedPanelName=this._currentPanel.name,this._currentPanel.publishState("hidden"),this.panelName=e,this._currentPanel=this.panels[e],this.content.dispatchEvent(new CustomEvent("onSwapContents")),this._currentPanel.publishState("shown"))},e.prototype.hidePanel=function(){var e=this._currentPanel;null!==e&&(this.content.dispatchEvent(new CustomEvent("onDeactivate")),e.publishState("hidden"),this.panelName=null,this._currentPanel=null)},e.prototype.activate=function(){this._currentPanel&&this.showPanel(this._currentPanel.name)},e.prototype.deactivate=function(){this.hidePanel()},e.prototype.getCurrentPanel=function(){return this._currentPanel},e.Panel=function(e,t,n){this.name=e,t&&(this.control=t.control,this.content=t.content),this.publishState=function(e){"function"==typeof this.stateChangeCallback&&this.stateChangeCallback.call(null,e)},"function"==typeof n&&(this.stateChangeCallback=n)},e}),define("orb/features/masthead/_layoutprimarynav",["orb/lib/_event","orb/api","orb/features/masthead/_linkmanager","orb/features/_moreDrawer"],function(e,y,g,w){"use strict";function k(){var e=document.querySelectorAll(".orb-nav-links li"),e=Array.prototype.slice.call(e),a=new g(e.slice(0,-1)),t=!1,i=document.querySelector(".orb-nav-search"),o=document.getElementById("orb-nav-more"),s=document.getElementById("orb-header"),l=document.querySelector(".orb-nav-pri-container"),n="orb-nav-lock",u=1,c=o.querySelector("a"),d=c.firstChild.data,f=c.getAttribute("data-alt");function r(){var e=k.event("beforeLayout"),t=k.event("afterLayout"),n={links:a.links},r=l.offsetTop;e.fire(n),o.classList.add("orb-nav-hide"),a.showAll();e=a.getLastItem();i.offsetTop===r&&e&&e.offsetTop===r||(function(){var e,t;o.classList.remove("orb-nav-hide");var n=c.getAttribute("style");o.style.width="auto",c.style.textIndent="0",c.firstChild.data=f,e=o.offsetWidth,c.firstChild.data=d,t=o.offsetWidth,t=Math.max(e,t),o.style.width=t+"px",n?c.setAttribute("style",n):c.removeAttribute("style")}(),a.hideToFit(function(e){if(o.offsetTop!==r||i.offsetTop!==r)return!0},u)),t.fire(n)}function h(){l.classList.add(n)}function m(){l.classList.remove(n),y.trigger("layout",{width:l.offsetWidth,height:l.offsetHeight})}function v(){var e,t=0;return function(){window.innerWidth!==t&&(t=window.innerWidth,h(),e&&clearTimeout(e),e=setTimeout(function(){r(),w.layoutMorePanelContent(),m()},100))}}function p(){var e={isNull:!0,offsetLeft:-1,offsetWidth:0},t=document.querySelector(".orb-nav-search")||e,n=document.getElementById("orb-nav-links")||e,r=document.getElementById("orb-nav-more")||e,i=0,e=void 0===s.getAttribute("dir");i=e?function(){return r.offsetLeft-(t.offsetLeft+t.offsetWidth)}:function(){return t.offsetLeft-n.offsetLeft-n.offsetWidth},k.event("afterLayout").add(function(e){r.style.width=r.offsetWidth+i()-3+"px"})}function b(e){window.orb&&!e&&function(){var e=document.querySelectorAll(".orb-nav-links ul li");if(o=window.orb.worldwideNavlinks){document.querySelector(".orb-footer-primary-links ul").innerHTML=o;for(var t=0,n=e.length;t<n;t++){var r=e[t];"orb-nav-more"!==r.id&&r.parentNode.removeChild(r)}document.getElementById("orb-nav-more").insertAdjacentHTML("beforebegin",o)}var i=document.querySelector(".orb-nav-blocks").firstChild,o=i.getAttribute("href").replace("co.uk","com");i.setAttribute("href",o),o=document.querySelectorAll(".orb-nav-links li"),o=Array.prototype.slice.call(o),a=new g(o.slice(0,-1))}();e=e?s.getAttribute("data-max-d"):s.getAttribute("data-max-w");null!==e&&a.applyMaximum(e),k.event("afterLayout").add(function(e){a.hasVisible()?c.firstChild.data=f:c.firstChild.data=d}),p(),h(),s.classList.add("orb-nav-dyn"),s.classList.remove("orb-nav-empty"),r(),m(),t=!0,w(),window.addEventListener("resize",v()),window.addEventListener("orientationchange",function(){setTimeout(v(),100)}),new MutationObserver(function(e,t){e.forEach(function(e){"childList"===e.type&&k.recalculateLayout()})}).observe(document.getElementById("orb-panels"),{childList:!0})}k.recalculateLayout=function(){t&&(h(),r(),w.layoutMorePanelContent(),p(),m())},window.bbcuser.isUKCombined().then(b).catch(function(){b(!0)})}return e.mixin(k),k}),define("orb/features/masthead/_linkmanager",[],function(){"use strict";function e(e){if(void 0!==this.links)for(var t=0,n=this.links.length;t<n;t++)e(this.links[t],t)}var i="orb-nav-hide",t=function(e){this.links=[];for(var t=0,n=e.length;t<n;t++){this.links[t]=e[t];var r=(this.links[t].innerText||this.links[t].textContent).trim();this.links[t].linktrack={nav_link:r}}};return t.prototype.removeLink=function(e){this.links[e].parentNode.removeChild(this.links[e]),delete this.links[e]},t.prototype.showAll=function(){e.call(this,function(e){e.classList.remove(i)})},t.prototype.hideToFit=function(e,t){for(var n=!1,r=this.links.length;r--;)if(n||e())this.links[r].classList.add(i);else{if(!(r<t-1))break;n=!0,r++}},t.prototype.applyMaximum=function(n){var r=this;e.call(this,function(e,t){n<=t&&r.removeLink(t)});var t=[];e.call(this,function(e){e&&t.push(e)}),this.links=t},t.prototype.hasVisible=function(){return this.links[0]&&-1===this.links[0].className.indexOf(i)},t.prototype.getLastItem=function(){return this.links.length?this.links[this.links.length-1]:null},t}),define("orb/features/_moreDrawer",["orb/nav"],function(c){var t=document.getElementById("orb-nav-more"),d="orb-first-visible",n=document.createElement("div");function r(){for(var e=document.querySelectorAll(".orb-nav-links li"),t=document.querySelectorAll("#orb-panel-more li"),n=document.querySelectorAll(".orb-panel-content ."+d),r="orb-panel-hide",i=0,o=c.getMastheadDrawer(),a=0,s=e.length;a<s-1&&-1===e[a].className.indexOf("orb-nav-hide");a++)i++;for(var l=0,u=t.length;l<u;l++)l<i?t[l].classList.add(r):t[l].classList.remove(r);n&&n.length&&n[0].classList.remove(d),i<t.length?t[i].classList.add(d):i!==t.length||(n=o.getCurrentPanel())&&"more"===n.name&&o.hidePanel(),document.getElementById("orb-panel-more-title").innerHTML=document.querySelector("#orb-nav-more a").innerHTML}function e(){var e;c.addDrawer("more",t,n),e=document.getElementById("orb-aside").querySelector(".orb-footer-primary-links ul").innerHTML,n.innerHTML='<div class="orb-panel-content b-g-p b-r orb-nav-sec"><h2 id="orb-panel-more-title"></h2><ul>'+e+"</ul></div>",r(),document.documentElement.classList.add("orb-more-loaded")}return n.setAttribute("id","orb-panel-more"),n.classList.add("orb-panel"),e.layoutMorePanelContent=r,e}),define("orb/features/_drawerManager",["orb/features/masthead/_drawer"],function(e){"use strict";var o=new e(document.getElementById("orb-panels")),a=document.getElementById("orb-header"),s="orb-nav-focus-on",l="orb-panel-active",u="orb-nav-active";function t(){function i(r,e){var i,o=parseFloat(r.offsetHeight),a=e.height,s=e.duration,l=r.style,u=(new Date).getTime();return clearTimeout(r.orbAnimTimer),new Promise(function(n,e){0===s?(l.height=a+"px",n()):(i=function(){var e,t=(new Date).getTime()-u,e=(e=t,-(a-o)*(e/=s)*(e-2)+o);if(s<t)return l.height=a+"px",void n();l.height=e+"px",r.orbAnimTimer=setTimeout(i,10)},r.orbAnimTimer=setTimeout(i,0))})}function e(){a.drawer=o;var e=a.querySelector("#orb-panels");e.addEventListener("onActivate",function(){!function(e){if(e){a.classList.add(u),e.control.classList.add(s);var t=e.content;t.style.display="block";var n=t.offsetHeight,r=o.content;if(r.style.height="0px",r.setAttribute("aria-expanded","true"),r.classList.add(l),"mouse"===a.navMode)return i(r,{height:n,duration:400}).then(function(){r.style.display="inline"}),t.setAttribute("tabindex","-1"),t.focus();r.style.display="inline";e=e.content.querySelector(".orb-first-visible a",e.content)||e.content.querySelector(".orb-first-target");e&&e.focus()}}(o.getPanel(o.panelName))}),e.addEventListener("onDeactivate",function(){!function(e){if(e){a.classList.remove(u),e.control.classList.remove(s);var t=e.content,n=t.offsetHeight+"px",r=o.content;if(r.style.display="block",r.style.height=n,r.classList.remove(l),r.setAttribute("aria-expanded","false"),"mouse"===a.navMode)return i(r,{height:0,duration:400}).then(function(){t.style.display="none"}),e.content.setAttribute("tabindex","-1"),e.content.focus();r.style.height="0px",t.style.display="none"}}(o.getPanel())}),e.addEventListener("onSwapContents",function(){!function(e,t){e.control.classList.remove(s),t.control.classList.add(s);var n=e.content,e=n.offsetHeight+"px",r=o.content;if(r.style.height=e,r.style.display="block",n.style.display="none",(e=t.content).style.display="block",n=e.offsetHeight,"mouse"===a.navMode)return i(r,{height:n,duration:400}).then(function(){r.style.display="inline"}),e.setAttribute("tabindex","-1"),e.focus();r.style.display="inline",linkToFocus=t.content.querySelector(".orb-first-visible a"),linkToFocus&&linkToFocus.focus()}(o.panels[o.deactivatedPanelName],o.getPanel())}),a.addEventListener("mousemove",function(e){a.navMode="mouse"}),a.addEventListener("mousedown",function(e){a.navMode="mouse"}),a.addEventListener("keydown",function(e){a.navMode="keyboard"})}"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}return t.addPanelEvents=function(t){var n=t.name;t.control.addEventListener("click",function(e){return o.showPanel(n),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}),a.addEventListener("keydown",function(e){27===("number"==typeof e.which?e.which:e.keyCode)&&(o.hidePanel(n),(e=t.control.querySelector("a"))&&e.focus())})},t.getMastheadDrawer=function(){return o},t}),define("orb/features/_skiplinks",[],function(){"use strict";return function(){function e(){var e=document.querySelector(".orb-skip-links");e&&e.addEventListener("click",function(e){e=(e.target||e.srcElement).getAttribute("href").match(/^(#.+)/);e&&(null!==(e=document.querySelector(e[1])).tabIndex&&-1!==e.tabIndex||(e.tabIndex=-1),e.focus())})}"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}}),define("orb/nav",["orb/features/_drawerManager","orb/features/masthead/_drawer"],function(i,o){"use strict";return{loadCss:function(e,t){window.bbcpage.loadCSS(e).then(function(){"function"==typeof t&&t()})},loadJs:function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,document.getElementsByTagName("body")[0].appendChild(t)},addDrawer:function(e,t,n,r){document.getElementById("orb-panels").appendChild(n);r=new o.Panel(e,{control:t,content:n},r);i.getMastheadDrawer().addPanel(r),i.addPanelEvents(r)},getDrawerState:function(e){var t=i.getMastheadDrawer().getCurrentPanel();return null===t||t.name!=e?"hidden":"shown"},updateDrawerHeight:function(e){},getMastheadDrawer:function(){return i.getMastheadDrawer()},refresh:function(){}}});
//# sourceMappingURL=orb.min.js.map
